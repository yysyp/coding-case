===================================================================================================================================================
// è¯·æè¿°ä¸€ä¸ªä½ å‚ä¸è¿‡çš„å¾®æœåŠ¡é¡¹ç›®
- ä½ è´Ÿè´£çš„æ¨¡å—å’Œä½¿ç”¨çš„æŠ€æœ¯æ ˆï¼Ÿ
- æœåŠ¡å¦‚ä½•åˆ’åˆ†ï¼Ÿåˆ’åˆ†ä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ
- é‡åˆ°è¿‡å“ªäº›æ€§èƒ½é—®é¢˜ï¼Ÿå¦‚ä½•è§£å†³çš„ï¼Ÿ

// é‡ç‚¹è€ƒå¯Ÿé—®é¢˜ï¼š
äº‹åŠ¡ç®¡ç†åŸç†(@Transactional)
Spring Bootè‡ªåŠ¨é…ç½®åŸç†

// åœºæ™¯ï¼šè®¢å•æœåŠ¡è°ƒç”¨åº“å­˜æœåŠ¡æ—¶è¶…æ—¶
// é—®é¢˜ï¼šå¦‚ä½•è®¾è®¡é‡è¯•æœºåˆ¶ï¼Ÿéœ€è¦è€ƒè™‘å“ªäº›å› ç´ ï¼Ÿ
// æœŸå¾…çš„å›ç­”æ–¹å‘ï¼š
- å¹‚ç­‰æ€§è®¾è®¡
- è¶…æ—¶å’Œé‡è¯•é…ç½®
- ç†”æ–­æœºåˆ¶
- é™çº§æ–¹æ¡ˆ
- æ—¥å¿—è¿½è¸ª

é—®é¢˜12ï¼šåƒåœ¾å›æ”¶ç®—æ³•äº†è§£å“ªäº›ï¼Ÿ
Â· åŸºç¡€ï¼šæ ‡è®°æ¸…é™¤ã€å¤åˆ¶ã€æ ‡è®°æ•´ç†
Â· è¿›é˜¶ï¼šåˆ†ä»£æ”¶é›†åŸç†ã€å„åƒåœ¾å›æ”¶å™¨ç‰¹ç‚¹
Â· æ·±åº¦ï¼šG1ã€ZGCçš„çªç ´æ€§è®¾è®¡

7. å¹¶å‘ç¼–ç¨‹æ·±åº¦
é—®é¢˜13ï¼švolatileå…³é”®å­—çš„ä½œç”¨ï¼Ÿ
```java
// ä»æµ…åˆ°æ·±çš„è¿½é—®ï¼š
1. ä¿è¯å¯è§æ€§ -> ä»€ä¹ˆæ˜¯å¯è§æ€§é—®é¢˜ï¼Ÿ
2. ç¦æ­¢æŒ‡ä»¤é‡æ’åº -> å†…å­˜å±éšœåŸç†
3. happens-beforeå…³ç³» -> JMMå†…å­˜æ¨¡å‹ç†è§£
4. å®é™…åº”ç”¨åœºæ™¯ï¼ˆå•ä¾‹æ¨¡å¼ã€çŠ¶æ€æ ‡å¿—ç­‰ï¼‰
```

ğŸ¯ ä¸“å®¶æ°´å¹³è€ƒå¯Ÿï¼ˆç³»ç»Ÿè®¾è®¡å’Œæ€§èƒ½ä¼˜åŒ–ï¼‰
é—®é¢˜16ï¼šå¦‚ä½•å®šä½å’Œè§£å†³çº¿ä¸ŠCPU 100%é—®é¢˜ï¼Ÿ
```bash
# æœŸæœ›çš„æ’æŸ¥æ€è·¯
1. topæ‰¾åˆ°é«˜CPUè¿›ç¨‹
2. top -Hpæ‰¾åˆ°é«˜CPUçº¿ç¨‹
3. jstackåˆ†æçº¿ç¨‹æ ˆ
4. ç»“åˆä¸šåŠ¡ä»£ç å®šä½é—®é¢˜
```

é—®é¢˜17ï¼šFull GCé¢‘ç¹å¦‚ä½•æ’æŸ¥ï¼Ÿ
Â· å†…å­˜dumpåˆ†æ
Â· GCæ—¥å¿—è§£è¯»
Â· å¸¸è§åŸå› ï¼šå†…å­˜æ³„æ¼ã€å¤§å¯¹è±¡ã€å…ƒç©ºé—´ä¸è¶³ç­‰

10. æ¶æ„è®¾è®¡èƒ½åŠ›
é—®é¢˜18ï¼šè®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘çš„ç§’æ€ç³»ç»Ÿï¼Œæ•°æ®åº“å±‚é¢å¦‚ä½•è®¾è®¡ï¼Ÿ
```java
// è€ƒå¯ŸçŸ¥è¯†ç‚¹å¹¿åº¦ï¼š
- æ•°æ®åº“ä¼˜åŒ–ï¼šç´¢å¼•ã€åˆ†åº“åˆ†è¡¨
- ç¼“å­˜ç­–ç•¥ï¼šRedisç¼“å­˜ã€ç¼“å­˜å‡»ç©¿/é›ªå´©è§£å†³æ–¹æ¡ˆ
- å¹¶å‘æ§åˆ¶ï¼šä¹è§‚é”ã€åˆ†å¸ƒå¼é”
- å¼‚æ­¥å¤„ç†ï¼šæ¶ˆæ¯é˜Ÿåˆ—å‰Šå³°å¡«è°·
```

##1**JavaåŸºç¡€ä¸åŸç† (10åˆ†é’Ÿ)**


   **é—®é¢˜1ï¼š** å‡è®¾æœ‰ä¸€ä¸ª `HashMap<Integer, Object>` åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹è¢«é¢‘ç¹è¯»å†™ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ
   - **è€ƒå¯Ÿç‚¹ï¼š** å¹¶å‘ç¼–ç¨‹åŸºç¡€ã€JUCå®æˆ˜ç»éªŒã€‚
   - **å‚è€ƒç­”æ¡ˆï¼š**
       - **é—®é¢˜ï¼š**
           1.  **æ•°æ®é”™ä¹±ï¼š** å¤šçº¿ç¨‹putå¯èƒ½å¯¼è‡´å…ƒç´ ä¸¢å¤±ã€‚
           2.  **æ­»å¾ªç¯ï¼š** JDK1.7åŠä»¥å‰ï¼Œå¹¶å‘æ‰©å®¹å¯èƒ½å¯¼è‡´é“¾è¡¨å½¢æˆç¯ï¼Œå¼•èµ·CPU 100%ã€‚ï¼ˆå¯è€ƒå¯Ÿå…¶å¯¹ç»†èŠ‚çš„äº†è§£ï¼‰
           3.  **å¿«é€Ÿå¤±è´¥ï¼š** è¿­ä»£æ—¶ä¿®æ”¹ä¼šæŠ›å‡º `ConcurrentModificationException`ã€‚
       - **è§£å†³æ–¹æ¡ˆï¼š**
           - ä½¿ç”¨ `ConcurrentHashMap`ã€‚
           - ä½¿ç”¨ `Collections.synchronizedMap(new HashMap<>())`ï¼ˆæ€§èƒ½è¾ƒå·®ï¼‰ã€‚
           - **æ·±å…¥è¿½é—®ï¼š** `ConcurrentHashMap` åœ¨JDK1.8ä¸­æ˜¯å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿï¼ˆç­”ï¼šsynchronized + CAS +  volatileï¼Œ é”çš„ç²’åº¦æ˜¯é“¾è¡¨å¤´èŠ‚ç‚¹æˆ–çº¢é»‘æ ‘æ ¹èŠ‚ç‚¹ï¼‰
   ConcurrentHashMap åªèƒ½ä¿è¯æä¾›çš„åŸå­æ€§è¯»å†™æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ é’ˆå¯¹è¿™ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¸¾ä¸€ä¸ªå½¢è±¡çš„ä¾‹å­ã€‚ConcurrentHashMap å°±åƒæ˜¯ä¸€ä¸ªå¤§ç¯®å­ï¼Œ
   ç°åœ¨è¿™ä¸ªç¯®å­é‡Œæœ‰ 900 ä¸ªæ¡”å­ï¼Œæˆ‘ä»¬æœŸæœ›æŠŠè¿™ä¸ªç¯®å­è£…æ»¡ 1000 ä¸ªæ¡”å­ï¼Œä¹Ÿå°±æ˜¯å†è£… 100 ä¸ªæ¡”å­ã€‚æœ‰ 10 ä¸ªå·¥äººæ¥å¹²è¿™ä»¶äº‹å„¿ï¼Œ
   å¤§å®¶å…ˆååˆ°å²—åä¼šè®¡ç®—è¿˜éœ€è¦è¡¥å¤šå°‘ä¸ªæ¡”å­è¿›å»ï¼Œæœ€åæŠŠæ¡”å­è£…å…¥ç¯®å­ã€‚ConcurrentHashMap è¿™ä¸ªç¯®å­æœ¬èº«ï¼Œå¯ä»¥ç¡®ä¿å¤šä¸ªå·¥äººåœ¨è£…ä¸œè¥¿è¿›å»æ—¶ï¼Œä¸ä¼šç›¸äº’å½±å“å¹²æ‰°ï¼Œ
   ä½†æ— æ³•ç¡®ä¿å·¥äºº A çœ‹åˆ°è¿˜éœ€è¦è£… 100 ä¸ªæ¡”å­ä½†æ˜¯è¿˜æœªè£…çš„æ—¶å€™ï¼Œå·¥äºº B å°±çœ‹ä¸åˆ°ç¯®å­ä¸­çš„æ¡”å­æ•°é‡ã€‚æ›´å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä½ å¾€è¿™ä¸ªç¯®å­è£… 100 ä¸ªæ¡”å­çš„æ“ä½œä¸æ˜¯åŸå­æ€§çš„ï¼Œ
   åœ¨åˆ«äººçœ‹æ¥å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç¬é—´ç¯®å­é‡Œæœ‰ 964 ä¸ªæ¡”å­ï¼Œè¿˜éœ€è¦è¡¥ 36 ä¸ªæ¡”å­ã€‚å›åˆ° ConcurrentHashMapï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ ConcurrentHashMap å¯¹å¤–æä¾›çš„æ–¹æ³•æˆ–èƒ½åŠ›
   çš„é™åˆ¶ï¼šä½¿ç”¨äº† ConcurrentHashMapï¼Œä¸ä»£è¡¨å¯¹å®ƒçš„å¤šä¸ªæ“ä½œä¹‹é—´çš„çŠ¶æ€æ˜¯ä¸€è‡´çš„ï¼Œæ˜¯æ²¡æœ‰å…¶ä»–çº¿ç¨‹åœ¨æ“ä½œå®ƒçš„ï¼Œå¦‚æœéœ€è¦ç¡®ä¿éœ€è¦æ‰‹åŠ¨åŠ é”ã€‚è¯¸å¦‚ sizeã€isEmpty
   å’Œ containsValue ç­‰èšåˆæ–¹æ³•ï¼Œåœ¨å¹¶å‘æƒ…å†µä¸‹å¯èƒ½ä¼šåæ˜  ConcurrentHashMap çš„ä¸­é—´çŠ¶æ€ã€‚å› æ­¤åœ¨å¹¶å‘æƒ…å†µä¸‹ï¼Œè¿™äº›æ–¹æ³•çš„è¿”å›å€¼åªèƒ½ç”¨ä½œå‚è€ƒï¼Œè€Œä¸èƒ½ç”¨äºæµç¨‹æ§åˆ¶ã€‚
   æ˜¾ç„¶ï¼Œåˆ©ç”¨ size æ–¹æ³•è®¡ç®—å·®å¼‚å€¼ï¼Œæ˜¯ä¸€ä¸ªæµç¨‹æ§åˆ¶ã€‚è¯¸å¦‚ putAll è¿™æ ·çš„èšåˆæ–¹æ³•ä¹Ÿä¸èƒ½ç¡®ä¿åŸå­æ€§ï¼Œåœ¨ putAll çš„è¿‡ç¨‹ä¸­å»è·å–æ•°æ®å¯èƒ½ä¼šè·å–åˆ°éƒ¨åˆ†æ•°æ®ã€‚
   **computeIfAbsent ä¸ºä»€ä¹ˆå¦‚æ­¤é«˜æ•ˆå‘¢ï¼Ÿç­”æ¡ˆå°±åœ¨æºç æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯ Java è‡ªå¸¦çš„ Unsafe å®ç°çš„ CASã€‚å®ƒåœ¨è™šæ‹Ÿæœºå±‚é¢ç¡®ä¿äº†å†™å…¥æ•°æ®çš„åŸå­æ€§ï¼Œæ¯”åŠ é”çš„æ•ˆç‡é«˜å¾—å¤š.
   **CopyOnWriteArrayList åœ¨ Java ä¸­ï¼ŒCopyOnWriteArrayList è™½ç„¶æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ ArrayListï¼Œä½†å› ä¸ºå…¶å®ç°æ–¹å¼æ˜¯ï¼Œæ¯æ¬¡ä¿®æ”¹æ•°æ®æ—¶éƒ½ä¼šå¤åˆ¶ä¸€ä»½æ•°æ®å‡ºæ¥ï¼Œæ‰€ä»¥æœ‰æ˜æ˜¾çš„é€‚ç”¨åœºæ™¯ï¼Œå³è¯»å¤šå†™å°‘æˆ–è€…è¯´å¸Œæœ›æ— é”è¯»çš„åœºæ™¯ã€‚


   **é—®é¢˜2ï¼š** è°ˆè°ˆä½ å¯¹ `synchronized` å’Œ `ReentrantLock` çš„ç†è§£ã€‚å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚ä½•é€‰æ‹©ï¼Ÿ
   - **è€ƒå¯Ÿç‚¹ï¼š** å¹¶å‘ç¼–ç¨‹åŸºæœ¬åŠŸï¼Œå¯¹é”æœºåˆ¶çš„æŒæ¡æ·±åº¦ã€‚
   - **å‚è€ƒç­”æ¡ˆï¼š**
     - **ç›¸åŒç‚¹ï¼š** éƒ½æ˜¯å¯é‡å…¥é”ï¼Œç”¨äºä¿è¯çº¿ç¨‹å®‰å…¨ã€‚
     - **ä¸åŒç‚¹ï¼š**
       - **åº•å±‚æœºåˆ¶ï¼š** `synchronized` æ˜¯JVMå…³é”®å­—ï¼Œé€šè¿‡å­—èŠ‚ç æŒ‡ä»¤`monitorenter/monitorexit`å®ç°ï¼›`ReentrantLock` æ˜¯JDKæä¾›çš„APIã€‚
       - **çµæ´»æ€§ï¼š** `ReentrantLock` æ›´çµæ´»ï¼Œå¯ä»¥å°è¯•éé˜»å¡è·å–é”(`tryLock`)ã€å¯ä¸­æ–­(`lockInterruptibly`)ã€å…¬å¹³é”ç­‰ã€‚`synchronized` æ˜¯éå…¬å¹³é”ã€‚
       - **æ¡ä»¶å˜é‡ï¼š** `ReentrantLock` å¯ä»¥ç»‘å®šå¤šä¸ª`Condition`ï¼Œå®ç°ç²¾ç»†çš„çº¿ç¨‹ç­‰å¾…/å”¤é†’ã€‚`synchronized` åªæœ‰ä¸€ä¸ªç­‰å¾…é›†ã€‚
     - **é€‰æ‹©ç­–ç•¥ï¼š**
       - ä¼˜å…ˆä½¿ç”¨ `synchronized`ï¼šä»£ç ç®€æ´ï¼Œç”±JVMç»´æŠ¤ï¼Œä¸æ˜“å‡ºé”™ã€‚
       - éœ€è¦**é«˜çº§åŠŸèƒ½**ï¼ˆå¦‚å®šæ—¶é”ç­‰å¾…ã€å¯ä¸­æ–­ã€å…¬å¹³æ€§ï¼‰æ—¶ï¼Œä½¿ç”¨ `ReentrantLock`ã€‚
     synchronized å’Œ ReentrantLock çš„æ€§èƒ½ä¸èƒ½ä¸€æ¦‚è€Œè®ºï¼Œæ—©æœŸç‰ˆæœ¬ synchronized åœ¨å¾ˆå¤šåœºæ™¯ä¸‹æ€§èƒ½ç›¸å·®è¾ƒå¤§ï¼Œåœ¨åç»­ç‰ˆæœ¬è¿›è¡Œäº†è¾ƒå¤šæ”¹è¿›ï¼Œåœ¨ä½ç«äº‰åœºæ™¯ä¸­è¡¨ç°å¯èƒ½ä¼˜äº ReentrantLockã€‚
     ** Java SDK å¹¶å‘åŒ…é€šè¿‡ Lock å’Œ Condition ä¸¤ä¸ªæ¥å£ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°ç®¡ç¨‹å¹¶ä¸”æ”¯æŒå¤šä¸ªæ¡ä»¶å˜é‡ï¼Œå…¶ä¸­ Lock ç”¨äºè§£å†³äº’æ–¥é—®é¢˜ï¼ŒCondition ç”¨äºè§£å†³åŒæ­¥é—®é¢˜ã€‚
     Lockæ¥å£æä¾›äº†ç ´åä¸å¯æŠ¢å æ¡ä»¶çš„æ–¹æ³•ï¼š
     - 1ï¼Œé˜»å¡çŠ¶æ€çš„çº¿ç¨‹èƒ½å¤Ÿå“åº”ä¸­æ–­ä¿¡å·ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬ç»™é˜»å¡çš„çº¿ç¨‹å‘é€ä¸­æ–­ä¿¡å·çš„æ—¶å€™ï¼Œèƒ½å¤Ÿå”¤é†’å®ƒã€‚ void lockInterruptibly() throws InterruptedException;
     - 2ï¼Œæ”¯æŒè¶…æ—¶ã€‚å¦‚æœçº¿ç¨‹åœ¨ä¸€æ®µæ—¶é—´ä¹‹å†…æ²¡æœ‰è·å–åˆ°é”ï¼Œä¸æ˜¯è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ boolean tryLock(long time, TimeUnit unit) throws InterruptedException;
     - 3ï¼Œéé˜»å¡åœ°è·å–é”ã€‚å¦‚æœå°è¯•è·å–é”å¤±è´¥ï¼Œå¹¶ä¸è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›ï¼Œé‚£è¿™ä¸ªçº¿ç¨‹ä¹Ÿæœ‰æœºä¼šé‡Šæ”¾æ›¾ç»æŒæœ‰çš„é”ã€‚ boolean tryLock();


   **æœ‰ä¸€ä¸ªå…±äº«å˜é‡ abcï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹é‡Œè®¾ç½®äº† abc çš„å€¼ abc=3ï¼Œä½ æ€è€ƒä¸€ä¸‹ï¼Œæœ‰å“ªäº›åŠæ³•å¯ ä»¥è®©å…¶ä»–çº¿ç¨‹èƒ½å¤Ÿçœ‹åˆ°abc==3ï¼Ÿ
   - 1, ä½¿ç”¨volatileä¿®é¥°abc, ç¦æ­¢CPUç¼“å­˜ï¼Œç›´æ¥ä»å†…å­˜è·å–å’Œvolatileå†™happen before volatileè¯»ã€‚
   - 2ï¼Œsynchronized ä»£ç å—ä¸­æ“ä½œabcï¼Œè§£é”happen before åç»­çš„åŠ é”ã€‚
   - 3ï¼Œçº¿ç¨‹Aæ“ä½œå…±äº«å˜é‡abcï¼Œç„¶åstartæ–¹æ³•å¯åŠ¨Bçº¿ç¨‹ï¼ŒBçº¿ç¨‹ä¸­å¯è§abcæ“ä½œã€‚
   - 4ï¼Œçº¿ç¨‹Aæ“ä½œå…±äº«å˜é‡abc, B join A, å¯¹äºBçº¿ç¨‹å¯è§ã€‚
   ** getæ–¹æ³•åŠ é”ä¸æ˜¯ä¸ºäº†è§£å†³åŸå­æ€§é—®é¢˜ï¼Œè¿™ä¸ªæ“ä½œæœ¬èº«å°±æ˜¯åŸå­æ€§çš„ï¼Œæ˜¯ä¸ºäº†å®ç°ä¸èƒ½çº¿ç¨‹é—´addoneæ–¹æ³•çš„æ“ä½œç»“æœå¯¹getæ–¹æ³•å¯è§ã€‚
   é‚£ä¹ˆvalueå˜é‡åŠ volitileä¹Ÿå¯ä»¥å®ç°åŒæ ·çš„æ•ˆæœï¼Œå¹¶å‘åŒ…çš„åŸå­ç±»å°±æ˜¯é å®ƒå®ç°çš„ã€‚ getæ–¹æ³•ä¸ç”¨synchronizedï¼ŒvalueåŠ volitileä¹Ÿèƒ½ä¿è¯å¯è§æ€§ï¼Œè¿™æ˜¯å¯¹çš„ã€‚
   ä½†æ˜¯å¦‚æœçœŸè¿™ä¹ˆåšäº†ï¼ŒåŸå­æ€§å¯èƒ½è¢«æ‰“ç ´ã€‚synchronizedå¹¶ ä¸ä¿è¯çº¿ç¨‹ä¸è¢«ä¸­æ–­ã€‚å¦‚æœåœ¨å†™é«˜ä½ä¸¤ä¸ªå­—èŠ‚çš„ä¸­é—´å†™çº¿ç¨‹è¢«ä¸­æ–­ï¼Œè€Œè¯»çº¿ç¨‹è¢«è°ƒç”¨æ‰§è¡Œï¼Œå› ä¸ºè¯»æ²¡å°è¯•åŠ é”ï¼Œ
   æ‰€ä»¥å¯ä»¥è¯»åˆ°å†™äº†ä¸€åŠçš„ç»“æœã€‚


   ** å¦‚ä½•ä¿è¯å¤šçº¿ç¨‹åŒæ—¶è®¿é—®å¤šä¸ªèµ„æºä¸å¯¼è‡´æ­»é”ï¼Ÿ
   ** å¦‚ä½•é¿å…æ­»é”å‘¢ï¼Ÿè¦é¿å…æ­»é”å°±éœ€è¦åˆ†ææ­»é”å‘ç”Ÿçš„æ¡ä»¶ï¼Œæœ‰ä¸ªå« Coffman çš„ç‰›äººæ—© å°±æ€»ç»“è¿‡äº†ï¼Œ
   - åªæœ‰ä»¥ä¸‹è¿™å››ä¸ªæ¡ä»¶éƒ½å‘ç”Ÿæ—¶æ‰ä¼šå‡ºç°æ­»é”ï¼š
   - äº’æ–¥ï¼Œå…±äº«èµ„æº X å’Œ Y åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å ç”¨ï¼›
   - å æœ‰ä¸”ç­‰å¾…ï¼Œçº¿ç¨‹ T1 å·²ç»å–å¾—å…±äº«èµ„æº Xï¼Œåœ¨ç­‰å¾…å…±äº«èµ„æº Y çš„æ—¶å€™ï¼Œä¸é‡Šæ”¾å…±äº«èµ„æºXï¼›
   - ä¸å¯æŠ¢å ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å¼ºè¡ŒæŠ¢å çº¿ç¨‹ T1 å æœ‰çš„èµ„æºï¼›
   - å¾ªç¯ç­‰å¾…ï¼Œçº¿ç¨‹ T1 ç­‰å¾…çº¿ç¨‹ T2 å æœ‰çš„èµ„æºï¼Œçº¿ç¨‹ T2 ç­‰å¾…çº¿ç¨‹ T1 å æœ‰çš„èµ„æºï¼Œå°±æ˜¯å¾ªç¯ç­‰å¾…ã€‚
   åè¿‡æ¥åˆ†æï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦æˆ‘ä»¬ç ´åå…¶ä¸­ä¸€ä¸ªï¼Œå°±å¯ä»¥æˆåŠŸé¿å…æ­»é”çš„å‘ç”Ÿã€‚
   Stringï¼ŒIntegerç­‰åŸºæœ¬ç±»å‹ï¼ŒJavaçš„å®ç°é‡Œé¢éƒ½ä¼˜åŒ–ä¸ºä¸å¯å˜å¯¹è±¡å¯¹è±¡æ± ï¼Œä¸€ä½†å¯¹ä»–ä»¬è¿›è¡Œèµ‹å€¼å°±ä¼šå˜æˆæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœç”¨è¿™äº›å¯¹è±¡ä½œä¸ºé”ï¼Œ
   é‚£ä¹ˆæœ‰ä¼šæœ‰é”å¤±æ•ˆçš„é—®é¢˜ï¼ˆå› ä¸ºå¯¹è±¡æ˜¯å¦å¤–ä¸€ä¸ªäº†ï¼ŒåŠ é”ä¼šåŠ åœ¨ä¸åŒçš„å¯¹è±¡ä¸Šï¼‰ã€‚
   è§£å†³â€œæ´»é”â€çš„æ–¹æ¡ˆå¾ˆç®€å•ï¼Œè°¦è®©æ—¶ï¼Œå°è¯•ç­‰å¾…ä¸€ä¸ªéšæœºçš„æ—¶é—´å°±å¯ä»¥äº†ã€‚
   ** ä¹è§‚é”å¦‚ä½•é¿å…ABAé—®é¢˜ ?


   ** å•ä¾‹æ¨¡å¼ï¼š
   class Singleton {
       private static volatile Singleton singleton;
       //æ„é€ æ–¹æ³•ç§æœ‰åŒ–
       private Singleton() {}

       //è·å–å®ä¾‹ï¼ˆå•ä¾‹ï¼‰
       public static Singleton getInstance() {
        //ç¬¬ä¸€æ¬¡æ£€æŸ¥
        if(singleton==null) {
            synchronize(Singleton.class) {
                //è·å–é”åäºŒæ¬¡æ£€æŸ¥
                12/30
                if(singleton==null) {
                    singleton=new Singleton();
                }
            }
        }
        return singleton;
       }
   }
   **ç›´æ¥ç”¨æšä¸¾å®ç°ï¼Œæšä¸¾å®ç°æ˜¯è‡ªåŠ¨å•ä¾‹ä¸”æ‡’åŠ è½½çš„ã€‚


   ** Exception å’Œ Error çš„åŒºåˆ«ï¼š Exception å’Œ Error éƒ½æ˜¯ç»§æ‰¿äº† Throwable ç±»ï¼Œåœ¨ Java ä¸­åªæœ‰ Throwable ç±»å‹çš„å®ä¾‹æ‰å¯ä»¥è¢«æŠ›å‡ºï¼ˆthrowï¼‰æˆ–è€…æ•è·ï¼ˆcatchï¼‰ï¼Œ
   å®ƒæ˜¯å¼‚å¸¸å¤„ç†æœºåˆ¶çš„åŸºæœ¬ç»„æˆç±»å‹ã€‚ Exception å’Œ Error ä½“ç°äº† Java å¹³å°è®¾è®¡è€…å¯¹ä¸åŒå¼‚å¸¸æƒ…å†µçš„åˆ†ç±»ã€‚Exception æ˜¯ç¨‹åºæ­£å¸¸è¿è¡Œä¸­ï¼Œå¯ä»¥é¢„æ–™çš„æ„å¤–æƒ…å†µï¼Œ
   å¯èƒ½å¹¶ä¸”åº”è¯¥è¢«æ•è·ï¼Œè¿›è¡Œç›¸åº”å¤„ç†ã€‚ Error æ˜¯æŒ‡åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸å¤§å¯èƒ½å‡ºç°çš„æƒ…å†µï¼Œç»å¤§éƒ¨åˆ†çš„ Error éƒ½ä¼šå¯¼è‡´ç¨‹åºï¼ˆæ¯”å¦‚ JVM è‡ªèº«ï¼‰å¤„äºéæ­£å¸¸çš„ã€ä¸å¯æ¢å¤çŠ¶æ€ã€‚
   æ—¢ç„¶æ˜¯éæ­£å¸¸æƒ…å†µï¼Œæ‰€ä»¥ä¸ä¾¿äºä¹Ÿä¸éœ€è¦æ•è·ï¼Œå¸¸è§çš„æ¯”å¦‚ OutOfMemoryError ä¹‹ç±»ï¼Œéƒ½æ˜¯ Error çš„å­ç±»ã€‚ Exception åˆåˆ†ä¸ºå¯æ£€æŸ¥ï¼ˆcheckedï¼‰å¼‚å¸¸å’Œä¸æ£€æŸ¥ï¼ˆuncheckedï¼‰å¼‚å¸¸ï¼Œ
   å¯æ£€æŸ¥å¼‚å¸¸åœ¨æºä»£ç é‡Œå¿…é¡»æ˜¾å¼åœ°è¿›è¡Œæ•è·å¤„ç†ï¼Œè¿™æ˜¯ç¼–è¯‘æœŸæ£€æŸ¥çš„ä¸€éƒ¨åˆ†ã€‚å‰é¢æˆ‘ä»‹ç»çš„ä¸å¯æŸ¥çš„ Errorï¼Œæ˜¯ Throwable ä¸æ˜¯ Exceptionã€‚ä¸æ£€æŸ¥å¼‚å¸¸å°±æ˜¯æ‰€è°“çš„è¿è¡Œæ—¶å¼‚å¸¸ï¼Œ
   ç±»ä¼¼ NullPointerExceptionã€ArrayIndexOutOfBoundsExceptionä¹‹ç±»ï¼Œé€šå¸¸æ˜¯å¯ä»¥ç¼–ç é¿å…çš„é€»è¾‘é”™è¯¯ï¼Œå…·ä½“æ ¹æ®éœ€è¦æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ•è·ï¼Œå¹¶ä¸ä¼šåœ¨ç¼–è¯‘æœŸå¼ºåˆ¶è¦æ±‚ã€‚


   ** åŠ¨æ€ä»£ç†æ˜¯åŸºäºä»€ä¹ˆåŸç†ï¼Ÿ åå°„æœºåˆ¶æ˜¯ Java è¯­è¨€æä¾›çš„ä¸€ç§åŸºç¡€åŠŸèƒ½ï¼Œèµ‹äºˆç¨‹åºåœ¨è¿è¡Œæ—¶è‡ªçœï¼ˆintrospectï¼Œå®˜æ–¹ç”¨è¯­ï¼‰çš„èƒ½åŠ›ã€‚
   é€šè¿‡åå°„æˆ‘ä»¬å¯ä»¥ç›´æ¥æ“ä½œç±»æˆ–è€…å¯¹è±¡ï¼Œæ¯”å¦‚è·å–æŸä¸ªå¯¹è±¡çš„ç±»å®šä¹‰ï¼Œè·å–ç±»å£°æ˜çš„å±æ€§å’Œæ–¹æ³•ï¼Œè°ƒç”¨æ–¹æ³•æˆ–è€…æ„é€ å¯¹è±¡ï¼Œç”šè‡³å¯ä»¥è¿è¡Œæ—¶ä¿®æ”¹ç±»å®šä¹‰ã€‚
   åŠ¨æ€ä»£ç†æ˜¯ä¸€ç§æ–¹ä¾¿è¿è¡Œæ—¶åŠ¨æ€æ„å»ºä»£ç†ã€åŠ¨æ€å¤„ç†ä»£ç†æ–¹æ³•è°ƒç”¨çš„æœºåˆ¶ï¼Œå¾ˆå¤šåœºæ™¯éƒ½æ˜¯åˆ©ç”¨ç±»ä¼¼æœºåˆ¶åšåˆ°çš„ï¼Œæ¯”å¦‚ç”¨æ¥åŒ…è£… RPC è°ƒç”¨ã€é¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼ˆAOPï¼‰ã€‚
   å®ç°åŠ¨æ€ä»£ç†çš„æ–¹å¼å¾ˆå¤šï¼Œæ¯”å¦‚ JDK è‡ªèº«æä¾›çš„åŠ¨æ€ä»£ç†ï¼Œå°±æ˜¯ä¸»è¦åˆ©ç”¨äº†ä¸Šé¢æåˆ°çš„åå°„æœºåˆ¶ã€‚è¿˜æœ‰å…¶ä»–çš„å®ç°æ–¹å¼ï¼Œæ¯”å¦‚åˆ©ç”¨ä¼ è¯´ä¸­æ›´é«˜æ€§èƒ½çš„å­—èŠ‚ç æ“ä½œæœºåˆ¶ï¼Œ
   ç±»ä¼¼ ASMã€cglibï¼ˆåŸºäº ASMï¼‰ã€Javassist ç­‰ã€‚


   ** Javaå¹¶å‘åŒ…æä¾›äº†å“ªäº›å¹¶å‘å·¥å…·ç±»ï¼Ÿ æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„å¹¶å‘åŒ…ä¹Ÿå°±æ˜¯ java.util.concurrent åŠå…¶å­åŒ…ï¼Œé›†ä¸­äº† Java å¹¶å‘çš„å„ç§åŸºç¡€å·¥å…·ç±»ï¼Œå…·ä½“ä¸»è¦åŒ…æ‹¬å‡ ä¸ªæ–¹é¢ï¼š
   æä¾›äº†æ¯” synchronized æ›´åŠ é«˜çº§çš„å„ç§åŒæ­¥ç»“æ„ï¼ŒåŒ…æ‹¬ CountDownLatchã€CyclicBarrierã€Semaphore ç­‰ï¼Œå¯ä»¥å®ç°æ›´åŠ ä¸°å¯Œçš„å¤šçº¿ç¨‹æ“ä½œï¼Œæ¯”å¦‚åˆ©ç”¨ Semaphore ä½œä¸ºèµ„æºæ§åˆ¶å™¨ï¼Œé™åˆ¶åŒæ—¶è¿›è¡Œå·¥ä½œçš„çº¿ç¨‹æ•°é‡ã€‚
   å„ç§çº¿ç¨‹å®‰å…¨çš„å®¹å™¨ï¼Œæ¯”å¦‚æœ€å¸¸è§çš„ ConcurrentHashMapã€æœ‰åºçš„ ConcurrentSkipListMapï¼Œæˆ–è€…é€šè¿‡ç±»ä¼¼å¿«ç…§æœºåˆ¶ï¼Œå®ç°çº¿ç¨‹å®‰å…¨çš„åŠ¨æ€æ•°ç»„ CopyOnWriteArrayList ç­‰ã€‚
   å„ç§å¹¶å‘é˜Ÿåˆ—å®ç°ï¼Œå¦‚å„ç§ BlockingQueue å®ç°ï¼Œæ¯”è¾ƒå…¸å‹çš„ ArrayBlockingQueueã€ SynchronousQueue æˆ–é’ˆå¯¹ç‰¹å®šåœºæ™¯çš„ PriorityBlockingQueue ç­‰ã€‚
   å¼ºå¤§çš„ Executor æ¡†æ¶ï¼Œå¯ä»¥åˆ›å»ºå„ç§ä¸åŒç±»å‹çš„çº¿ç¨‹æ± ï¼Œè°ƒåº¦ä»»åŠ¡è¿è¡Œç­‰ï¼Œç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä¸å†éœ€è¦è‡ªå·±ä»å¤´å®ç°çº¿ç¨‹æ± å’Œä»»åŠ¡è°ƒåº¦å™¨ã€‚


   ** è°ˆè°ˆä½ çš„GCè°ƒä¼˜æ€è·¯? è°ˆåˆ°è°ƒä¼˜ï¼Œè¿™ä¸€å®šæ˜¯é’ˆå¯¹ç‰¹å®šåœºæ™¯ã€ç‰¹å®šç›®çš„çš„äº‹æƒ…ï¼Œ å¯¹äº GC è°ƒä¼˜æ¥è¯´ï¼Œé¦–å…ˆå°±éœ€è¦æ¸…æ¥šè°ƒä¼˜çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿä»æ€§èƒ½çš„è§’åº¦çœ‹ï¼Œé€šå¸¸å…³æ³¨ä¸‰ä¸ªæ–¹é¢ï¼Œ
   å†…å­˜å ç”¨ï¼ˆfootprintï¼‰ã€å»¶æ—¶ï¼ˆlatencyï¼‰å’Œååé‡ï¼ˆthroughputï¼‰ï¼Œ
   å¤§å¤šæ•°æƒ…å†µä¸‹è°ƒä¼˜ä¼šä¾§é‡äºå…¶ä¸­ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªæ–¹é¢çš„ç›®æ ‡ï¼Œå¾ˆå°‘æœ‰æƒ…å†µå¯ä»¥å…¼é¡¾ä¸‰ä¸ªä¸åŒçš„è§’åº¦ã€‚å½“ç„¶ï¼Œé™¤äº†ä¸Šé¢é€šå¸¸çš„ä¸‰ä¸ªæ–¹é¢ï¼Œä¹Ÿå¯èƒ½éœ€è¦è€ƒè™‘å…¶ä»– GC ç›¸å…³çš„åœºæ™¯ï¼Œ
   ä¾‹å¦‚ï¼ŒOOM ä¹Ÿå¯èƒ½ä¸ä¸åˆç†çš„ GC ç›¸å…³å‚æ•°æœ‰å…³ï¼›æˆ–è€…ï¼Œåº”ç”¨å¯åŠ¨é€Ÿåº¦æ–¹é¢çš„éœ€æ±‚ï¼ŒGC ä¹Ÿä¼šæ˜¯ä¸ªè€ƒè™‘çš„æ–¹é¢ã€‚ åŸºæœ¬çš„è°ƒä¼˜æ€è·¯å¯ä»¥æ€»ç»“ä¸ºï¼š
    ç†è§£åº”ç”¨éœ€æ±‚å’Œé—®é¢˜ï¼Œç¡®å®šè°ƒä¼˜ç›®æ ‡ã€‚
    å‡è®¾ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªåº”ç”¨æœåŠ¡ï¼Œä½†å‘ç°å¶å°”ä¼šå‡ºç°æ€§èƒ½æŠ–åŠ¨ï¼Œå‡ºç°è¾ƒé•¿çš„æœåŠ¡åœé¡¿ã€‚è¯„ä¼°ç”¨æˆ·å¯æ¥å—çš„å“åº”æ—¶é—´å’Œä¸šåŠ¡é‡ï¼Œå°†ç›®æ ‡ç®€åŒ–ä¸ºï¼Œå¸Œæœ› GC æš‚åœå°½é‡æ§åˆ¶åœ¨ 200ms ä»¥å†…ï¼Œå¹¶ä¸”ä¿è¯ä¸€å®šæ ‡å‡†çš„ååé‡ã€‚
    æŒæ¡ JVM å’Œ GC çš„çŠ¶æ€ï¼Œå®šä½å…·ä½“çš„é—®é¢˜ï¼Œç¡®å®šçœŸçš„æœ‰ GC è°ƒä¼˜çš„å¿…è¦ã€‚å…·ä½“æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæ¯”å¦‚ï¼Œé€šè¿‡ jstat ç­‰å·¥å…·æŸ¥çœ‹ GC ç­‰ç›¸å…³çŠ¶æ€ï¼Œå¯ä»¥å¼€å¯ GC æ—¥å¿—ï¼Œæˆ–è€…æ˜¯åˆ©ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„è¯Šæ–­å·¥å…·ç­‰ã€‚
    ä¾‹å¦‚ï¼Œé€šè¿‡è¿½è¸ª GC æ—¥å¿—ï¼Œå°±å¯ä»¥æŸ¥æ‰¾æ˜¯ä¸æ˜¯ GC åœ¨ç‰¹å®šæ—¶é—´å‘ç”Ÿäº†é•¿æ—¶é—´çš„æš‚åœï¼Œè¿›è€Œå¯¼è‡´äº†åº”ç”¨å“åº”ä¸åŠæ—¶ã€‚
    è¿™é‡Œéœ€è¦æ€è€ƒï¼Œé€‰æ‹©çš„ GC ç±»å‹æ˜¯å¦ç¬¦åˆæˆ‘ä»¬çš„åº”ç”¨ç‰¹å¾ï¼Œå¦‚æœæ˜¯ï¼Œå…·ä½“é—®é¢˜è¡¨ç°åœ¨å“ªé‡Œï¼Œæ˜¯ Minor GC è¿‡é•¿ï¼Œè¿˜æ˜¯ Mixed GC ç­‰å‡ºç°å¼‚å¸¸åœé¡¿æƒ…å†µï¼›å¦‚æœä¸æ˜¯ï¼Œè€ƒè™‘åˆ‡æ¢åˆ°ä»€ä¹ˆç±»å‹ï¼Œå¦‚ CMS å’Œ G1 éƒ½æ˜¯æ›´ä¾§é‡äºä½å»¶è¿Ÿçš„ GC é€‰é¡¹ã€‚
    é€šè¿‡åˆ†æç¡®å®šå…·ä½“è°ƒæ•´çš„å‚æ•°æˆ–è€…è½¯ç¡¬ä»¶é…ç½®ã€‚
    éªŒè¯æ˜¯å¦è¾¾åˆ°è°ƒä¼˜ç›®æ ‡ï¼Œå¦‚æœè¾¾åˆ°ç›®æ ‡ï¼Œå³å¯ä»¥è€ƒè™‘ç»“æŸè°ƒä¼˜ï¼›å¦åˆ™ï¼Œé‡å¤å®Œæˆåˆ†æã€è°ƒæ•´ã€éªŒè¯è¿™ä¸ªè¿‡ç¨‹ã€‚


    **Javaä¹±ç é—®é¢˜çš„åŸå› æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ


    **Javaçº¿ç¨‹æ± æœ‰å“ªäº›é…ç½®å‚æ•°ï¼Ÿ


    ** è°ˆè°ˆMySQLæ”¯æŒçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä»¥åŠæ‚²è§‚é”å’Œä¹è§‚é”çš„åŸç†å’Œåº”ç”¨åœºæ™¯ï¼Ÿ
    æ‰€è°“éš”ç¦»çº§åˆ«ï¼ˆIsolation Levelï¼‰ï¼Œå°±æ˜¯åœ¨æ•°æ®åº“äº‹åŠ¡ä¸­ï¼Œä¸ºä¿è¯å¹¶å‘æ•°æ®è¯»å†™çš„æ­£ç¡®æ€§è€Œæå‡ºçš„å®šä¹‰ï¼Œå®ƒå¹¶ä¸æ˜¯ MySQL ä¸“æœ‰çš„æ¦‚å¿µï¼Œ
    è€Œæ˜¯æºäºANSI/ISOåˆ¶å®šçš„SQL-92æ ‡å‡†ã€‚ æ¯ç§å…³ç³»å‹æ•°æ®åº“éƒ½æä¾›äº†å„è‡ªç‰¹è‰²çš„éš”ç¦»çº§åˆ«å®ç°ï¼Œè™½ç„¶åœ¨é€šå¸¸çš„å®šä¹‰ä¸­æ˜¯ä»¥é”ä¸ºå®ç°å•å…ƒï¼Œä½†å®é™…çš„å®ç°åƒå·®ä¸‡åˆ«ã€‚
    ä»¥æœ€å¸¸è§çš„ MySQL InnoDB å¼•æ“ä¸ºä¾‹ï¼Œå®ƒæ˜¯åŸºäº MVCCï¼ˆMulti-Versioning Concurrency Controlï¼‰å’Œé”çš„å¤åˆå®ç°ï¼ŒæŒ‰ç…§éš”ç¦»ç¨‹åº¦ä»ä½åˆ°é«˜ï¼Œ
    MySQL äº‹åŠ¡éš”ç¦»çº§åˆ«åˆ†ä¸ºå››ä¸ªä¸åŒå±‚æ¬¡ï¼š
    -è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ï¼Œå°±æ˜¯ä¸€ä¸ªäº‹åŠ¡èƒ½å¤Ÿçœ‹åˆ°å…¶ä»–äº‹åŠ¡å°šæœªæäº¤çš„ä¿®æ”¹ï¼Œè¿™æ˜¯æœ€ä½çš„éš”ç¦»æ°´å¹³ï¼Œå…è®¸è„è¯»å‡ºç°ã€‚
    -è¯»å·²æäº¤ï¼ˆRead committedï¼‰ï¼Œäº‹åŠ¡èƒ½å¤Ÿçœ‹åˆ°çš„æ•°æ®éƒ½æ˜¯å…¶ä»–äº‹åŠ¡å·²ç»æäº¤çš„ä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯ä¿è¯ä¸ä¼šçœ‹åˆ°ä»»ä½•ä¸­é—´æ€§çŠ¶æ€ï¼Œå½“ç„¶è„è¯»ä¹Ÿä¸ä¼šå‡ºç°ã€‚è¯»å·²æäº¤ä»ç„¶æ˜¯æ¯”è¾ƒä½çº§åˆ«çš„éš”ç¦»ï¼Œå¹¶ä¸ä¿è¯å†æ¬¡è¯»å–æ—¶èƒ½å¤Ÿè·å–åŒæ ·çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å…è®¸å…¶ä»–äº‹åŠ¡å¹¶å‘ä¿®æ”¹æ•°æ®ï¼Œå…è®¸ä¸å¯é‡å¤è¯»å’Œå¹»è±¡è¯»ï¼ˆPhantom Readï¼‰å‡ºç°ã€‚
    -å¯é‡å¤è¯»ï¼ˆRepeatable readsï¼‰ï¼Œä¿è¯åŒä¸€ä¸ªäº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ˜¯ MySQL InnoDB å¼•æ“çš„é»˜è®¤éš”ç¦»çº§åˆ«ï¼Œä½†æ˜¯å’Œä¸€äº›å…¶ä»–æ•°æ®åº“å®ç°ä¸åŒçš„æ˜¯ï¼Œå¯ä»¥ç®€å•è®¤ä¸º MySQL åœ¨å¯é‡å¤è¯»çº§åˆ«ä¸ä¼šå‡ºç°å¹»è±¡è¯»ã€‚
    -ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ï¼Œå¹¶å‘äº‹åŠ¡ä¹‹é—´æ˜¯ä¸²è¡ŒåŒ–çš„ï¼Œé€šå¸¸æ„å‘³ç€è¯»å–éœ€è¦è·å–å…±äº«è¯»é”ï¼Œæ›´æ–°éœ€è¦è·å–æ’ä»–å†™é”ï¼Œå¦‚æœ SQL ä½¿ç”¨ WHERE è¯­å¥ï¼Œè¿˜ä¼šè·å–åŒºé—´é”ï¼ˆMySQL ä»¥ GAP é”å½¢å¼å®ç°ï¼Œå¯é‡å¤è¯»çº§åˆ«ä¸­é»˜è®¤ä¹Ÿä¼šä½¿ç”¨ï¼‰ï¼Œè¿™æ˜¯æœ€é«˜çš„éš”ç¦»çº§åˆ«ã€‚
    è‡³äºæ‚²è§‚é”å’Œä¹è§‚é”ï¼Œä¹Ÿå¹¶ä¸æ˜¯ MySQL æˆ–è€…æ•°æ®åº“ä¸­ç‹¬æœ‰çš„æ¦‚å¿µï¼Œè€Œæ˜¯å¹¶å‘ç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ä¸»è¦åŒºåˆ«åœ¨äºï¼Œæ“ä½œå…±äº«æ•°æ®æ—¶ï¼Œâ€œæ‚²è§‚é”â€å³è®¤ä¸ºæ•°æ®å‡ºç°å†²çªçš„å¯èƒ½æ€§æ›´å¤§ï¼Œè€Œâ€œä¹è§‚é”â€åˆ™æ˜¯è®¤ä¸ºå¤§éƒ¨åˆ†æƒ…å†µä¸ä¼šå‡ºç°å†²çªï¼Œè¿›è€Œå†³å®šæ˜¯å¦é‡‡å–æ’ä»–æ€§æªæ–½ã€‚
    åæ˜ åˆ° MySQL æ•°æ®åº“åº”ç”¨å¼€å‘ä¸­ï¼Œæ‚²è§‚é”ä¸€èˆ¬å°±æ˜¯åˆ©ç”¨ç±»ä¼¼ SELECT â€¦ FOR UPDATE è¿™æ ·çš„è¯­å¥ï¼Œå¯¹æ•°æ®åŠ é”ï¼Œé¿å…å…¶ä»–äº‹åŠ¡æ„å¤–ä¿®æ”¹æ•°æ®ã€‚ä¹è§‚é”åˆ™ä¸ Java å¹¶å‘åŒ…ä¸­çš„ AtomicFieldUpdater ç±»ä¼¼ï¼Œä¹Ÿæ˜¯åˆ©ç”¨ CAS æœºåˆ¶ï¼Œå¹¶ä¸ä¼šå¯¹æ•°æ®åŠ é”ï¼Œè€Œæ˜¯é€šè¿‡å¯¹æ¯”æ•°æ®çš„æ—¶é—´æˆ³æˆ–è€…ç‰ˆæœ¬å·ï¼Œæ¥å®ç°ä¹è§‚é”éœ€è¦çš„ç‰ˆæœ¬åˆ¤æ–­ã€‚
    æˆ‘è®¤ä¸ºå‰é¢æåˆ°çš„ MVCCï¼Œå…¶æœ¬è´¨å°±å¯ä»¥çœ‹ä½œæ˜¯ç§ä¹è§‚é”æœºåˆ¶ï¼Œè€Œæ’ä»–æ€§çš„è¯»å†™é”ã€åŒé˜¶æ®µé”ç­‰åˆ™æ˜¯æ‚²è§‚é”çš„å®ç°ã€‚
    æœ‰å…³å®ƒä»¬çš„åº”ç”¨åœºæ™¯ï¼Œä½ å¯ä»¥æ„å»ºä¸€ä¸‹ç®€åŒ–çš„ç«è½¦ä½™ç¥¨æŸ¥è¯¢å’Œè´­ç¥¨ç³»ç»Ÿã€‚åŒæ—¶æŸ¥è¯¢çš„äººå¯èƒ½å¾ˆå¤šï¼Œè™½ç„¶å…·ä½“åº§ä½ç¥¨åªèƒ½æ˜¯å–ç»™ä¸€ä¸ªäººï¼Œä½†ä½™ç¥¨å¯èƒ½å¾ˆå¤šï¼Œè€Œä¸”ä¹Ÿå¹¶ä¸èƒ½é¢„æµ‹å“ªä¸ªæŸ¥è¯¢è€…ä¼šè´­ç¥¨ï¼Œè¿™ä¸ªæ—¶å€™å°±æ›´é€‚åˆç”¨ä¹è§‚é”ã€‚


    ** è®¾è®¡æ¨¡å¼ **
    - **é—®é¢˜ï¼š** è¯·ä¸¾ä¾‹è¯´æ˜ä½ åœ¨é¡¹ç›®ä¸­æ˜¯å¦‚ä½•ä½¿ç”¨è®¾è®¡æ¨¡å¼çš„ï¼Ÿå®ƒå¸¦æ¥äº†ä»€ä¹ˆå¥½å¤„ï¼Ÿ
    - **è€ƒå¯Ÿç‚¹ï¼š** ä»£ç è®¾è®¡æ€æƒ³ä¸å®è·µç»éªŒï¼Œè€Œéæ­»è®°ç¡¬èƒŒã€‚
    - **å‚è€ƒç­”æ¡ˆï¼š**
     - **ç¤ºä¾‹1ï¼ˆæ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼‰ï¼š** åœ¨å¤šä¸ªæ”¯ä»˜æ¸ é“ï¼ˆå¾®ä¿¡ã€æ”¯ä»˜å®ï¼‰çš„å¤„ç†æµç¨‹ä¸­ï¼Œå®šä¹‰äº†æŠ½è±¡çš„ `AbstractPayService`ï¼Œå°†æ”¯ä»˜ã€å›è°ƒã€æŸ¥è¯¢ç­‰å…¬å…±æµç¨‹å›ºåŒ–åœ¨æ¨¡æ¿æ–¹æ³•ä¸­ï¼Œå­ç±»åªéœ€å®ç°å„è‡ªæ¸ é“çš„ç‰¹å®šæ­¥éª¤ã€‚**å¥½å¤„ï¼š** ä»£ç å¤ç”¨ï¼Œç»“æ„æ¸…æ™°ï¼Œæµç¨‹ç»Ÿä¸€ï¼Œæ˜“äºæ‰©å±•æ–°æ¸ é“ã€‚
     - **ç¤ºä¾‹2ï¼ˆç­–ç•¥æ¨¡å¼ï¼‰ï¼š** é’ˆå¯¹ä¸åŒçš„ç”¨æˆ·ç±»å‹ï¼ˆæ–°ç”¨æˆ·ã€è€ç”¨æˆ·ã€VIPç”¨æˆ·ï¼‰ï¼Œæœ‰ä¸åŒçš„æŠ˜æ‰£è®¡ç®—ç­–ç•¥ã€‚æˆ‘ä»¬å®šä¹‰äº† `DiscountStrategy` æ¥å£å’Œå¤šä¸ªå®ç°ç±»ï¼Œé€šè¿‡ä¸Šä¸‹æ–‡åœ¨è¿è¡Œæ—¶é€‰æ‹©åˆé€‚çš„ç­–ç•¥ã€‚**å¥½å¤„ï¼š** æ¶ˆé™¤äº†å¤æ‚çš„if-elseåˆ†æ”¯ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ï¼Œç­–ç•¥å¯ä»¥çµæ´»æ›¿æ¢å’Œæ‰©å±•ã€‚


------------------------------------------------------------------------------------------------------------------------
##2** Springæ¡†æ¶æ·±åº¦ (10åˆ†é’Ÿ)**

   ** SpringMVC @Controller, @RestControlleråŒºåˆ«ï¼Ÿ


   **é—®é¢˜ï¼š** Spring Beançš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ€æ ·çš„ï¼Ÿè¯·å°½å¯èƒ½è¯¦ç»†åœ°æè¿°ã€‚
   - **è€ƒå¯Ÿç‚¹ï¼š** å¯¹IoCå®¹å™¨æ ¸å¿ƒåŸç†çš„ç†è§£ã€‚
   - **å‚è€ƒç­”æ¡ˆï¼š**
     1. **å®ä¾‹åŒ–ï¼š** é€šè¿‡åå°„åˆ›å»ºBeanå®ä¾‹ã€‚
     2. **å±æ€§èµ‹å€¼ï¼š** ä¸ºBeançš„å±æ€§æ³¨å…¥å€¼ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ã€‚
     3. **Awareæ¥å£å›è°ƒï¼š** å¦‚æœå®ç°äº† `BeanNameAware`, `BeanFactoryAware` ç­‰æ¥å£ï¼Œä¼šè°ƒç”¨ç›¸åº”æ–¹æ³•ã€‚
     4. **BeanPostProcessorå‰ç½®å¤„ç†ï¼š** è°ƒç”¨ `postProcessBeforeInitialization` æ–¹æ³•ã€‚
     5. **åˆå§‹åŒ–ï¼š** è°ƒç”¨ `InitializingBean` çš„ `afterPropertiesSet` æ–¹æ³•å’Œè‡ªå®šä¹‰çš„ `init-method`ã€‚
     6. **BeanPostProcessoråç½®å¤„ç†ï¼š** è°ƒç”¨ `postProcessAfterInitialization` æ–¹æ³•ï¼ˆè¿™é‡Œæ˜¯AOPä»£ç†ç”Ÿæˆçš„å…³é”®ï¼‰ã€‚
     7. **ä½¿ç”¨ï¼š** Beanå®Œå…¨å¯ç”¨ï¼Œå­˜åœ¨äºSpringå®¹å™¨ä¸­ã€‚
     8. **é”€æ¯ï¼š** å®¹å™¨å…³é—­æ—¶ï¼Œè°ƒç”¨ `DisposableBean` çš„ `destroy` æ–¹æ³•å’Œè‡ªå®šä¹‰çš„ `destroy-method`ã€‚
   **Spring Beançš„ç”Ÿå‘½å‘¨æœŸ?ç²—ç•¥åˆ†ä¸º5ä¸ªé˜¶æ®µ:å®ä¾‹åŒ–ã€å±æ€§èµ‹å€¼ã€åˆå§‹åŒ–ã€ä½¿ç”¨ã€é”€æ¯ã€‚
   **é—®é¢˜2ï¼š** Spring Beançš„å®ä¾‹åŒ–è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿä»€ä¹ˆæ˜¯å¾ªç¯ä¾èµ–ï¼ŸSpringæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„ï¼Ÿ
   - **è€ƒå¯Ÿç‚¹ï¼š** å¯¹IoCå®¹å™¨æ ¸å¿ƒåŸç†çš„æŒæ¡æ·±åº¦ã€‚
   - **å‚è€ƒç­”æ¡ˆï¼š**
   - **ç”Ÿå‘½å‘¨æœŸï¼š** å®ä¾‹åŒ– -> å±æ€§å¡«å……ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ -> åˆå§‹åŒ–ï¼ˆ`InitializingBean`, `init-method`ï¼‰ç­‰ã€‚
   - **å¾ªç¯ä¾èµ–ï¼š** Aä¾èµ–Bï¼ŒBä¹Ÿä¾èµ–Aã€‚
   - **è§£å†³æ–¹æ¡ˆï¼š** Springé€šè¿‡**ä¸‰çº§ç¼“å­˜**è§£å†³Setteræ³¨å…¥çš„å¾ªç¯ä¾èµ–ã€‚
       - **ä¸€çº§ç¼“å­˜ï¼ˆå•ä¾‹æ± ï¼‰ï¼š** å­˜æ”¾å®Œæ•´çš„Beanã€‚
       - **äºŒçº§ç¼“å­˜ï¼š** å­˜æ”¾æå‰æš´éœ²çš„æ—©æœŸBeanï¼ˆæœªå¡«å……å±æ€§ï¼‰ã€‚
       - **ä¸‰çº§ç¼“å­˜ï¼š** å­˜æ”¾Beançš„å·¥å‚å¯¹è±¡ï¼Œç”¨äºç”ŸæˆAOPä»£ç†å¯¹è±¡ã€‚
   - **è¿‡ç¨‹ï¼š** åˆ›å»ºA -> æå‰æš´éœ²Aï¼ˆæ”¾å…¥ä¸‰çº§ç¼“å­˜ï¼‰-> å¡«å……Aå±æ€§æ—¶å‘ç°éœ€è¦B -> åˆ›å»ºB -> å¡«å……Bå±æ€§æ—¶å‘ç°éœ€è¦A -> ä»ä¸‰çº§ç¼“å­˜æ‹¿åˆ°Açš„å·¥å‚è·å–æ—©æœŸA -> Båˆ›å»ºå®Œæˆ -> Aå®Œæˆåˆ›å»ºã€‚**æ³¨æ„ï¼šæ„é€ å™¨æ³¨å…¥æ— æ³•è§£å†³å¾ªç¯ä¾èµ–ã€‚**


    **1. åŸºç¡€é—®é¢˜ï¼šè§£é‡Šä¸€ä¸‹AOPæ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›æ ¸å¿ƒæ¦‚å¿µï¼Ÿä½ å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨AOPï¼Ÿ**
    - **è€ƒå¯Ÿç‚¹ï¼š** å¯¹AOPæ€æƒ³çš„ç†è§£å’Œå®æˆ˜ç»éªŒã€‚
    - **å‚è€ƒç­”æ¡ˆï¼š**
    - **æ˜¯ä»€ä¹ˆï¼š** AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå…è®¸å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ã€å®‰å…¨ï¼‰ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œæé«˜æ¨¡å—åŒ–ã€‚
    - **æ ¸å¿ƒæ¦‚å¿µï¼š**
        - **Aspectï¼š** åˆ‡é¢ï¼Œå°è£…æ¨ªåˆ‡é€»è¾‘çš„æ¨¡å—ï¼ˆå¦‚ä¸€ä¸ª`@Aspect`ç±»ï¼‰ã€‚
        - **Joinpointï¼š** è¿æ¥ç‚¹ï¼Œç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªç‚¹ï¼ˆå¦‚æ–¹æ³•æ‰§è¡Œã€å¼‚å¸¸å¤„ç†ï¼‰ã€‚
        - **Adviceï¼š** é€šçŸ¥ï¼Œåœ¨ç‰¹å®šè¿æ¥ç‚¹ä¸Šæ‰§è¡Œçš„åŠ¨ä½œï¼ˆå¦‚`@Before`, `@After`, `@Around`ï¼‰ã€‚
        - **Pointcutï¼š** åˆ‡å…¥ç‚¹ï¼ŒåŒ¹é…è¿æ¥ç‚¹çš„è¡¨è¾¾å¼ï¼Œå®šä¹‰äº†é€šçŸ¥åœ¨ä½•å¤„æ‰§è¡Œã€‚
        - **Weavingï¼š** ç»‡å…¥ï¼Œå°†åˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡å¹¶åˆ›å»ºä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚
    - **å®æˆ˜åº”ç”¨ï¼š**
        - **æ—¥å¿—è®°å½•ï¼š** ä½¿ç”¨`@Around`é€šçŸ¥è®°å½•æ–¹æ³•çš„å…¥å‚ã€å‡ºå‚å’Œæ‰§è¡Œæ—¶é—´ã€‚
        - **äº‹åŠ¡ç®¡ç†ï¼š** `@Transactional` æ³¨è§£çš„æœ¬è´¨å°±æ˜¯åŸºäºAOPå®ç°çš„ã€‚
        - **æƒé™æ ¡éªŒï¼š** åœ¨æ–¹æ³•æ‰§è¡Œå‰ï¼ˆ`@Before`ï¼‰æ£€æŸ¥ç”¨æˆ·æƒé™ã€‚
        - **å…¨å±€å¼‚å¸¸å¤„ç†ï¼š** ä½¿ç”¨`@AfterThrowing`é€šçŸ¥è¿›è¡Œç»Ÿä¸€çš„å¼‚å¸¸è½¬æ¢å’Œè®°å½•ã€‚


    **Springäº‹åŠ¡ç®¡ç†ï¼š@Transactional æ³¨è§£çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¤±æ•ˆï¼Ÿ
    å‚è€ƒç­”æ¡ˆï¼š
    åŸç†ï¼š åŸºäºAOPã€‚åœ¨è°ƒç”¨è¢«@Transactionalæ³¨è§£çš„æ–¹æ³•æ—¶ï¼ŒSpringä¼šåˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚ä»£ç†é€»è¾‘ä¼šï¼š
    æ ¹æ®æ–¹æ³•æ˜¯å¦æŠ›å‡ºå¼‚å¸¸æ¥æäº¤æˆ–å›æ»šäº‹åŠ¡ã€‚
    å¸¸è§å¤±æ•ˆåœºæ™¯ï¼š
    1ï¼Œæ–¹æ³•épublicï¼š @Transactional åªèƒ½ç”¨äºpublicæ–¹æ³•ã€‚
    2ï¼Œè‡ªè°ƒç”¨é—®é¢˜ï¼š åŒä¸€ä¸ªç±»ä¸­ï¼Œä¸€ä¸ªéäº‹åŠ¡æ–¹æ³•Aè°ƒç”¨ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•Bï¼Œäº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆã€‚å› ä¸ºè‡ªè°ƒç”¨ä¸èµ°ä»£ç†ã€‚
    3ï¼Œå¼‚å¸¸è¢«æ•è·ï¼š æ–¹æ³•ä¸­æŠ›å‡ºçš„å¼‚å¸¸è¢«try-catchæ•è·ï¼Œè€Œæœªè¢«æŠ›å‡ºï¼Œäº‹åŠ¡ç®¡ç†å™¨æ— æ³•æ„ŸçŸ¥å¼‚å¸¸ï¼Œä¼šæ­£å¸¸æäº¤ã€‚
    4ï¼Œé»˜è®¤åªå›æ»šRuntimeExceptionå’ŒErrorï¼š å¦‚æœæŠ›å‡ºçš„æ˜¯å—æ£€å¼‚å¸¸ï¼ˆå¦‚Exceptionï¼‰ï¼Œé»˜è®¤ä¸ä¼šå›æ»šã€‚éœ€è¦ç”¨ @Transactional(rollbackFor = Exception.class) æŒ‡å®šã€‚
    5ï¼Œæ•°æ®åº“å¼•æ“ä¸æ”¯æŒï¼š å¦‚ä½¿ç”¨MyISAMå¼•æ“ï¼Œå®ƒæœ¬èº«ä¸æ”¯æŒäº‹åŠ¡ã€‚


    **1. Spring MVCï¼šæè¿°ä¸€ä¸‹Spring MVCå¤„ç†ä¸€ä¸ªHTTPè¯·æ±‚çš„å®Œæ•´æµç¨‹ã€‚**
    - **è€ƒå¯Ÿç‚¹ï¼š** å¯¹MVCæ¡†æ¶æ ¸å¿ƒæµç¨‹çš„ç†Ÿæ‚‰åº¦ã€‚
    - **å‚è€ƒç­”æ¡ˆï¼š**
    1.  **DispatcherServletï¼š** ä½œä¸ºå‰ç«¯æ§åˆ¶å™¨ï¼Œæ¥æ”¶æ‰€æœ‰è¯·æ±‚ã€‚
    2.  **HandlerMappingï¼š** `DispatcherServlet` æŸ¥è¯¢ä¸€ä¸ªæˆ–å¤šä¸ª `HandlerMapping`ï¼Œæ‰¾åˆ°å¤„ç†è¯·æ±‚çš„Controllerå’Œæ–¹æ³•ï¼ˆHandlerï¼‰ã€‚
    3.  **HandlerAdapterï¼š** `DispatcherServlet` é€šè¿‡ `HandlerAdapter` æ¥å®é™…æ‰§è¡Œæ‰¾åˆ°çš„Handlerã€‚
    4.  **æ‰§è¡ŒHandlerï¼š** `HandlerAdapter` è°ƒç”¨Controllerä¸­çš„æ–¹æ³•ï¼Œæ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚
    5.  **è¿”å›ModelAndViewï¼š** Handleræ‰§è¡Œå®Œæˆåï¼Œè¿”å›ä¸€ä¸ª `ModelAndView` å¯¹è±¡ï¼ˆåŒ…å«æ¨¡å‹æ•°æ®å’Œè§†å›¾åï¼‰ã€‚
    6.  **è§†å›¾è§£æï¼š** `DispatcherServlet` å°†è§†å›¾åäº¤ç»™ `ViewResolver` æ¥è§£æä¸ºå…·ä½“çš„ `View` å¯¹è±¡ã€‚
    7.  **æ¸²æŸ“è§†å›¾ï¼š** `View` å¯¹è±¡ç»“åˆModelæ•°æ®ï¼Œæ¸²æŸ“è¾“å‡ºï¼ˆå¦‚ç”ŸæˆHTMLã€JSONï¼‰ã€‚
    8.  **è¿”å›å“åº”ï¼š** å°†æ¸²æŸ“ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚


    **2. Spring Bootï¼šSpring Bootçš„è‡ªåŠ¨é…ç½®æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ**
    - **è€ƒå¯Ÿç‚¹ï¼š** å¯¹Spring Bootâ€œçº¦å®šä¼˜äºé…ç½®â€æ ¸å¿ƒåŸç†çš„ç†è§£ã€‚
    - **å‚è€ƒç­”æ¡ˆï¼š**
    - **æ ¸å¿ƒæœºåˆ¶ï¼š** åŸºäº `@EnableAutoConfiguration` æ³¨è§£ã€‚
    - **å·¥ä½œæµç¨‹ï¼š**
        1.  Spring Bootåœ¨å¯åŠ¨æ—¶ä¼šåŠ è½½ `META-INF/spring.factories` æ–‡ä»¶ï¼Œå…¶ä¸­å®šä¹‰äº†å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»ï¼ˆ`XXXAutoConfiguration`ï¼‰ã€‚
        2.  è¿™äº›è‡ªåŠ¨é…ç½®ç±»ä½¿ç”¨ `@Conditional` åŠå…¶æ´¾ç”Ÿæ³¨è§£ï¼ˆå¦‚ `@ConditionalOnClass`, `@ConditionalOnProperty`, `@ConditionalOnMissingBean`ï¼‰è¿›è¡Œæ¡ä»¶åŒ–è£…é…ã€‚
        3.  åªæœ‰å½“æ¡ä»¶æ»¡è¶³æ—¶ï¼ˆä¾‹å¦‚ï¼Œç±»è·¯å¾„ä¸‹å­˜åœ¨æŸä¸ªç‰¹å®šçš„ç±»ã€é…ç½®äº†æŸä¸ªå±æ€§ã€å®¹å™¨ä¸­æ²¡æœ‰æŸä¸ªBeanï¼‰ï¼Œè‡ªåŠ¨é…ç½®ç±»æ‰ä¼šç”Ÿæ•ˆã€‚
        4.  ç”Ÿæ•ˆçš„è‡ªåŠ¨é…ç½®ç±»ä¼šå‘å®¹å™¨ä¸­æ³¨å…¥é¢„å…ˆé…ç½®å¥½çš„Beanã€‚
    - **ä¸¾ä¾‹ï¼š** å½“ç±»è·¯å¾„ä¸‹å­˜åœ¨ `DataSource.class` æ—¶ï¼Œ`DataSourceAutoConfiguration` æ‰ä¼šç”Ÿæ•ˆï¼Œå¹¶å°è¯•æ ¹æ® `application.properties` ä¸­çš„é…ç½®åˆ›å»ºä¸€ä¸ªæ•°æ®æºBeanã€‚


------------------------------------------------------------------------------------------------------------------------
##3** ä¸­é—´ä»¶ (10åˆ†é’Ÿ)**

1.  **MySQLï¼š** ä¸€å¼ è®¢å•è¡¨æ•°æ®é‡å·¨å¤§ï¼Œ`SELECT * FROM orders WHERE user_id = ? AND status = 'UNPAID'` æŸ¥è¯¢å¾ˆæ…¢ï¼Œä½ å¦‚ä½•ä¼˜åŒ–ï¼Ÿ
    - **è€ƒå¯Ÿç‚¹ï¼š** SQLä¼˜åŒ–å’Œç´¢å¼•è®¾è®¡çš„å®æˆ˜èƒ½åŠ›ã€‚
    - **å‚è€ƒç­”æ¡ˆï¼š**
        - **ç¬¬ä¸€æ­¥ï¼š** `EXPLAIN` åˆ†æï¼Œçœ‹æ˜¯å¦å…¨è¡¨æ‰«æã€‚
        - **ç¬¬äºŒæ­¥ï¼š** ä¸º `(user_id, status)` åˆ›å»º**è”åˆç´¢å¼•**ã€‚å› ä¸º `user_id` çš„åŒºåˆ†åº¦é€šå¸¸æ›´é«˜ï¼Œæ”¾åœ¨å‰é¢ã€‚
        - **æ·±å…¥è¿½é—®ï¼š** ä¸ºä»€ä¹ˆè¿™ä¸ªè”åˆç´¢å¼•æœ‰æ•ˆï¼Ÿï¼ˆç­”ï¼šç´¢å¼•è¦†ç›–äº†æŸ¥è¯¢æ¡ä»¶ï¼Œå¯ä»¥åˆ©ç”¨B+æ ‘å¿«é€Ÿå®šä½ï¼‰
        - **å…¶ä»–ä¼˜åŒ–ï¼š** å¦‚æœæŸ¥è¯¢å­—æ®µå¾ˆå°‘ï¼Œå¯ä»¥è€ƒè™‘åˆ›å»º**è¦†ç›–ç´¢å¼•** `(user_id, status, order_id, amount)` é¿å…å›è¡¨ã€‚æœ€ç»ˆï¼Œå¯¹å†å²è®¢å•è¿›è¡Œ**åˆ†åº“åˆ†è¡¨**ã€‚
    ä¸€æ¡SQLæ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ 1ï¼ŒSQLæ˜¯å¦æ¶‰åŠå¤šè¡¨å…³è”ï¼Œæˆ–è€…å­æŸ¥è¯¢ï¼Œèƒ½å¦æ‹†åˆ†ã€‚ 2ï¼ŒåŠ ç´¢å¼• 3ï¼Œåšå†å²è¡¨ 4ï¼Œä¸»ä»


2.  **Redisï¼š** å¦‚ä½•ä½¿ç”¨Redisè®¾è®¡ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼Ÿè¦æ³¨æ„å“ªäº›é—®é¢˜ï¼Ÿ
    - **è€ƒå¯Ÿç‚¹ï¼š** åˆ†å¸ƒå¼é”çš„åŸç†å’Œå¯é æ€§è®¾è®¡ã€‚
    - **å‚è€ƒç­”æ¡ˆï¼š**
        - **åŸºç¡€å‘½ä»¤ï¼š** `SET lock_key unique_value NX PX 30000` (NXè¡¨ç¤ºä¸å­˜åœ¨æ‰è®¾ç½®ï¼ŒPXè®¾ç½®è¶…æ—¶æ—¶é—´)ã€‚
        - **å…³é”®é—®é¢˜ï¼š**
            1.  **åŸå­æ€§ï¼š** è®¾ç½®å€¼å’Œè¶…æ—¶æ—¶é—´å¿…é¡»åœ¨ä¸€ä¸ªå‘½ä»¤ä¸­å®Œæˆã€‚
            2.  **è¯¯é‡Šæ”¾ï¼š** é‡Šæ”¾é”æ—¶è¦æ£€æŸ¥valueæ˜¯å¦æ˜¯è‡ªå·±è®¾ç½®çš„ï¼Œä½¿ç”¨Luaè„šæœ¬ä¿è¯åŸå­æ€§ã€‚
            3.  **è¶…æ—¶æ—¶é—´ï¼š** è®¾ç½®åˆç†çš„è¶…æ—¶ï¼Œé˜²æ­¢ä¸šåŠ¡æœªæ‰§è¡Œå®Œé”è‡ªåŠ¨é‡Šæ”¾ã€‚
        - **è¿›é˜¶æ–¹æ¡ˆï¼š** å¯¹äºæç«¯å¯é æ€§è¦æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ **RedLock** ç®—æ³•ï¼Œä½†è¿‡äºç¹é‡ï¼Œé€šå¸¸ä¸»ä»Redis+ä¸Šè¿°æ–¹æ¡ˆå·²è¶³å¤Ÿã€‚


3.  **Kafka/RocketMQï¼š** å¦‚ä½•ä¿è¯æ¶ˆæ¯çš„**é¡ºåºæ€§**å’Œ**ä¸é‡å¤æ¶ˆè´¹**ï¼Ÿ
    - **è€ƒå¯Ÿç‚¹ï¼š** å¯¹æ¶ˆæ¯é˜Ÿåˆ—é«˜çº§ç‰¹æ€§çš„ç†è§£ã€‚
    - **å‚è€ƒç­”æ¡ˆï¼š**
        - **é¡ºåºæ€§ï¼š**
            - **Kafkaï¼š** å°†éœ€è¦ä¿è¯é¡ºåºçš„æ¶ˆæ¯å‘é€åˆ°åŒä¸€ä¸ªPartitionï¼ˆé€šè¿‡æŒ‡å®šKeyï¼‰ã€‚
            - **RocketMQï¼š** ä½¿ç”¨**é¡ºåºæ¶ˆæ¯**ï¼Œå°†æ¶ˆæ¯å‘åˆ°åŒä¸€ä¸ªMessageQueueã€‚
        - **ä¸é‡å¤æ¶ˆè´¹ï¼ˆå¹‚ç­‰æ€§ï¼‰ï¼š**
            - **æ ¹æœ¬åŸå› ï¼š** ç”Ÿäº§è€…é‡æŠ•æˆ–æ¶ˆè´¹è€…é‡å¯å¯¼è‡´ã€‚
            - **è§£å†³æ–¹æ¡ˆï¼š** åœ¨**æ¶ˆè´¹è€…ä¸šåŠ¡é€»è¾‘**ä¸­å®ç°å¹‚ç­‰ã€‚
                - **æ•°æ®åº“ï¼š** åˆ©ç”¨ä¸»é”®æˆ–å”¯ä¸€é”®çº¦æŸã€‚
                - **Redisï¼š** å°†æ¶ˆæ¯å”¯ä¸€IDï¼ˆå¦‚è®¢å•IDï¼‰å†™å…¥Redisï¼Œå¤„ç†å‰å…ˆæŸ¥é‡ã€‚
   **æ¶ˆæ¯é˜Ÿåˆ— (Kafka/RocketMQ) (6åˆ†é’Ÿ)**
   - **é—®é¢˜ï¼š** å¦‚ä½•ä¿è¯æ¶ˆæ¯é˜Ÿåˆ—çš„â€œæ¶ˆæ¯ä¸ä¸¢å¤±â€å’Œâ€œæ¶ˆæ¯ä¸é‡å¤æ¶ˆè´¹â€ï¼Ÿ
   - **è€ƒå¯Ÿç‚¹ï¼š** å¯¹æ¶ˆæ¯é˜Ÿåˆ—å¯é æ€§ä¼ è¾“å’Œå¹‚ç­‰æ€§è®¾è®¡çš„æŒæ¡ã€‚
   - **å‚è€ƒç­”æ¡ˆï¼š**
     - **æ¶ˆæ¯ä¸ä¸¢å¤±ï¼š**
       - **ç”Ÿäº§è€…ï¼š** é‡‡ç”¨åŒæ­¥å‘é€+ç¡®è®¤æœºåˆ¶ï¼ˆå¦‚Kafkaçš„`acks=all`ï¼ŒRocketMQçš„åŒæ­¥åˆ·ç›˜+ä¸»ä»åŒæ­¥ï¼‰ã€‚
       - **Brokerï¼š** è®¾ç½®å¤šå‰¯æœ¬æœºåˆ¶ï¼Œç¡®ä¿ä¸»èŠ‚ç‚¹å®•æœºåæ•°æ®ä¸ä¸¢å¤±ã€‚
       - **æ¶ˆè´¹è€…ï¼š** å…ˆå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œå†æ‰‹åŠ¨æäº¤ä½ç§»ï¼ˆcommit offsetï¼‰ã€‚
     - **æ¶ˆæ¯ä¸é‡å¤æ¶ˆè´¹ï¼ˆå¹‚ç­‰æ€§ï¼‰ï¼š**
       - **æ ¹æœ¬åŸå› ï¼š** ç½‘ç»œé—®é¢˜å¯¼è‡´ç”Ÿäº§è€…é‡è¯•æˆ–æ¶ˆè´¹è€…é‡å¯åä½ç§»æœªåŠæ—¶æäº¤ã€‚
       - **è§£å†³æ–¹æ¡ˆï¼š** æ¶ˆæ¯é˜Ÿåˆ—æœ¬èº«æ— æ³•å®Œå…¨è§£å†³ï¼Œéœ€åœ¨**æ¶ˆè´¹è€…ä¸šåŠ¡é€»è¾‘ä¸­å®ç°å¹‚ç­‰**ã€‚
         - **åˆ©ç”¨æ•°æ®åº“å”¯ä¸€é”®ï¼š** åœ¨æ¶ˆæ¯ä¸­æºå¸¦å”¯ä¸€IDï¼ˆå¦‚è®¢å•IDï¼‰ï¼Œæ’å…¥æ•°æ®åº“æ—¶åˆ©ç”¨å”¯ä¸€çº¦æŸå»é‡ã€‚
         - **åˆ©ç”¨Redisï¼š** å°†æ¶ˆæ¯IDå­˜å…¥Redisï¼Œå¤„ç†å‰å…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨ã€‚


------------------------------------------------------------------------------------------------------------------------
##4** DevOpsä¸äº‘å¹³å° (çº¦5åˆ†é’Ÿ)**


**1. Docker & Kubernetes (5åˆ†é’Ÿ)**
   - **é—®é¢˜ï¼š** åœ¨Kubernetesä¸­ï¼ŒDeploymentã€Serviceå’ŒIngresså„è‡ªçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬æ˜¯å¦‚ä½•åä½œçš„ï¼Ÿ
   - **è€ƒå¯Ÿç‚¹ï¼š** å¯¹K8sæ ¸å¿ƒå¯¹è±¡å’Œç½‘ç»œæ¨¡å‹çš„ç†è§£ã€‚
   - **å‚è€ƒç­”æ¡ˆï¼š**
     - **Deploymentï¼š** å®šä¹‰Podçš„éƒ¨ç½²ä¿¡æ¯ï¼Œå¦‚ä½¿ç”¨å“ªä¸ªé•œåƒã€æœ‰å‡ ä¸ªå‰¯æœ¬ã€‚å®ƒç¡®ä¿æŒ‡å®šæ•°é‡çš„Podå‰¯æœ¬å§‹ç»ˆè¿è¡Œï¼Œå¹¶è´Ÿè´£æ»šåŠ¨æ›´æ–°å’Œå›æ»šã€‚
     - **Serviceï¼š** ä¸ºä¸€ç»„Podæä¾›ç¨³å®šçš„ç½‘ç»œç«¯ç‚¹ï¼ˆClusterIPï¼‰ã€‚å®ƒé€šè¿‡æ ‡ç­¾é€‰æ‹©å™¨æ‰¾åˆ°Podï¼Œå¹¶æä¾›è´Ÿè½½å‡è¡¡ã€‚Serviceä½¿å‰ç«¯åº”ç”¨æ— éœ€å…³å¿ƒåç«¯Podçš„å…·ä½“IPåœ°å€ã€‚
     - **Ingressï¼š** ç®¡ç†é›†ç¾¤å¤–éƒ¨è®¿é—®çš„APIå¯¹è±¡ï¼Œæä¾›HTTP/HTTPSè·¯ç”±è§„åˆ™ã€‚å®ƒç›¸å½“äºä¸€ä¸ªæ™ºèƒ½çš„7å±‚è´Ÿè½½å‡è¡¡å™¨ï¼Œå¯ä»¥å°†ä¸åŒåŸŸåæˆ–è·¯å¾„çš„æµé‡è·¯ç”±åˆ°é›†ç¾¤å†…éƒ¨ä¸åŒçš„Serviceã€‚
     - **åä½œæµç¨‹ï¼š** `å¤–éƒ¨ç”¨æˆ· -> Ingress -> Service -> Pod (ç”±Deploymentç®¡ç†)`ã€‚


**2. Jenkins & å…¬æœ‰äº‘ (5åˆ†é’Ÿ)**
   - **é—®é¢˜ï¼š** è¯·æè¿°ä¸€ä¸ªä½ ç†Ÿæ‚‰çš„CI/CDæµæ°´çº¿æµç¨‹ã€‚åœ¨å…¬æœ‰äº‘ï¼ˆå¦‚AWS/Aliyunï¼‰ä¸Šéƒ¨ç½²åº”ç”¨ï¼Œä¸ä¼ ç»ŸIDCéƒ¨ç½²ç›¸æ¯”ï¼Œæœ‰å“ªäº›ä¼˜åŠ¿å’Œä½ éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Ÿ
   - **è€ƒå¯Ÿç‚¹ï¼š** CI/CDå®è·µå’Œäº‘å¹³å°ç»éªŒã€‚
   - **å‚è€ƒç­”æ¡ˆï¼š**
     - **CI/CDæµç¨‹ç¤ºä¾‹ï¼š** `å¼€å‘è€…æäº¤ä»£ç  -> Git -> Jenkinsè‡ªåŠ¨è§¦å‘æ„å»º -> å•å…ƒæµ‹è¯• -> æ‰“åŒ…Dockeré•œåƒ -> æ¨é€è‡³é•œåƒä»“åº“ -> æ›´æ–°K8s Deployment -> å¥åº·æ£€æŸ¥ -> æœåŠ¡ä¸Šçº¿`ã€‚
     - **å…¬æœ‰äº‘ä¼˜åŠ¿ï¼š**
       - **å¼¹æ€§ä¸æ•æ·ï¼š** å¿«é€Ÿç”³è¯·å’Œé‡Šæ”¾èµ„æºï¼ŒæŒ‰éœ€ä»˜è´¹ã€‚
       - **æ‰˜ç®¡æœåŠ¡ï¼š** ç›´æ¥ä½¿ç”¨äº‘ä¸Šçš„RDSã€Redisã€Kafkaç­‰æœåŠ¡ï¼Œé™ä½è¿ç»´æˆæœ¬ã€‚
       - **å…¨çƒéƒ¨ç½²ï¼š** è½»æ¾å®ç°å¤šåœ°åŸŸå®¹ç¾ã€‚
     - **éœ€è¦æ³¨æ„ï¼š**
       - **æˆæœ¬æ§åˆ¶ï¼š** èµ„æºé—²ç½®ä¼šå¯¼è‡´æµªè´¹ï¼Œéœ€è¦å®Œå–„çš„ç›‘æ§å’Œé¢„ç®—ç®¡ç†ã€‚
       - **ç½‘ç»œä¸å®‰å…¨ï¼š** ç†è§£VPCã€å®‰å…¨ç»„ç­‰ç½‘ç»œéš”ç¦»å’Œå®‰å…¨ç­–ç•¥ã€‚
       - ** vendor-lock-inï¼ˆå‚å•†é”å®šï¼‰ï¼š** å°½é‡ä½¿ç”¨æ ‡å‡†åŒ–çš„K8sç­‰å¼€æºæŠ€æœ¯ï¼Œå‡å°‘å¯¹äº‘å‚å•†ç‰¹æœ‰æœåŠ¡çš„ä¾èµ–ã€‚


------------------------------------------------------------------------------------------------------------------------
##5**å¾®æœåŠ¡/è®¾è®¡ (15åˆ†é’Ÿ)**


    1.  **é—®é¢˜ï¼š** è¯·ä»‹ç»ä¸€ä¸ªæ‚¨æœ€è¿‘å‚ä¸çš„ã€æŠ€æœ¯å¤æ‚åº¦æœ€é«˜çš„Javaé¡¹ç›®ã€‚æ‚¨åœ¨å…¶ä¸­æ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Ÿé‡ç‚¹ä»‹ç»ä¸€ä¸‹å®ƒçš„å¾®æœåŠ¡æ¶æ„æ˜¯å¦‚ä½•åˆ’åˆ†çš„ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¿™æ ·åˆ’åˆ†ï¼Ÿï¼ˆä¾‹å¦‚ï¼Œæ˜¯æŒ‰ä¸šåŠ¡é¢†åŸŸã€æŒ‰åŠŸèƒ½è¿˜æ˜¯å…¶ä»–ï¼Ÿï¼‰
        - **è€ƒå¯Ÿç‚¹ï¼š**
            - **æŠ€æœ¯æ€»ç»“ä¸æ²Ÿé€šèƒ½åŠ›ï¼š** èƒ½å¦æ¸…æ™°æè¿°å¤æ‚ç³»ç»Ÿã€‚
            - **æ¶æ„è®¾è®¡èƒ½åŠ›ï¼š** å¯¹å¾®æœåŠ¡æ‹†åˆ†åŸåˆ™ï¼ˆå¦‚DDDã€å•ä¸€èŒè´£ï¼‰çš„ç†è§£ã€‚
            - **æŠ€æœ¯å†³ç­–èƒ½åŠ›ï¼š** äº†è§£å…¶æŠ€æœ¯é€‰å‹çš„ç†ç”±ã€‚
        - **å‚è€ƒç­”æ¡ˆï¼š**
            - **è§’è‰²ï¼š** æ ¸å¿ƒå¼€å‘/æ¶æ„å¸ˆï¼Œè´Ÿè´£XXæœåŠ¡çš„è®¾è®¡ä¸å®ç°ã€‚
            - **æ¶æ„åˆ’åˆ†ï¼š** æˆ‘ä»¬é‡‡ç”¨**é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰** è¿›è¡ŒæœåŠ¡åˆ’åˆ†ã€‚ä¾‹å¦‚ï¼Œå°†ç³»ç»Ÿåˆ’åˆ†ä¸º`ç”¨æˆ·ä¸­å¿ƒ`ã€`è®¢å•æœåŠ¡`ã€`å•†å“æœåŠ¡`ã€`åº“å­˜æœåŠ¡`å’Œ`æ”¯ä»˜æœåŠ¡`ã€‚
            - **åŸå› ï¼š**
                - **é«˜å†…èšä½è€¦åˆï¼š** æ¯ä¸ªæœåŠ¡ç®¡ç†è‡ªå·±ç‹¬ç«‹çš„ä¸šåŠ¡é¢†åŸŸå’Œæ•°æ®ï¼Œè¾¹ç•Œæ¸…æ™°ã€‚
                - **ç‹¬ç«‹éƒ¨ç½²ä¸æ‰©å±•ï¼š** â€œåŒåä¸€â€æ—¶ï¼Œè®¢å•å’Œæ”¯ä»˜æœåŠ¡å¯ä»¥ç‹¬ç«‹æ‰©å®¹ï¼Œè€Œç”¨æˆ·ä¸­å¿ƒåˆ™ä¸éœ€è¦ã€‚
                - **æŠ€æœ¯å¤šæ ·æ€§ï¼š** ä¸åŒçš„æœåŠ¡å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„æŠ€æœ¯æ ˆï¼ˆè™½ç„¶æˆ‘ä»¬ä¸»è¦ç”¨Javaï¼‰ã€‚


    2.  **è¿½é—®ï¼š** æœåŠ¡ä¹‹é—´æ˜¯å¦‚ä½•é€šä¿¡çš„ï¼Ÿåœ¨ä¿è¯æ•°æ®ä¸€è‡´æ€§æ–¹é¢é‡åˆ°äº†å“ªäº›æŒ‘æˆ˜ï¼Œæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ
        - **è€ƒå¯Ÿç‚¹ï¼š** å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿæ ¸å¿ƒé—®é¢˜çš„å®è·µç»éªŒã€‚
        - **å‚è€ƒç­”æ¡ˆï¼š**
            - **é€šä¿¡ï¼š** åŒæ­¥è°ƒç”¨ä½¿ç”¨ **OpenFeign**ï¼ˆåŸºäºHTTPï¼‰ï¼Œå¼‚æ­¥é€šä¿¡ä½¿ç”¨ **RocketMQ/Kafka**ã€‚
            - **æ•°æ®ä¸€è‡´æ€§ï¼ˆåˆ†å¸ƒå¼äº‹åŠ¡ï¼‰ï¼š**
                - **æœ€ç»ˆä¸€è‡´æ€§ï¼ˆä¸»æµï¼‰ï¼š** å¯¹äºä¸‹å•æ‰£åº“å­˜åœºæ™¯ï¼Œæˆ‘ä»¬é‡‡ç”¨**æœ¬åœ°æ¶ˆæ¯è¡¨**æˆ–ç›´æ¥ä½¿ç”¨**RocketMQçš„äº‹åŠ¡æ¶ˆæ¯**ï¼Œä¿è¯æ ¸å¿ƒæµç¨‹çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚
                - **å¼ºä¸€è‡´æ€§ï¼ˆå°‘ç”¨ï¼‰ï¼š** å¯¹äºè´¦æˆ·æ‰£æ¬¾ç­‰åœºæ™¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ **Seata** çš„ATæ¨¡å¼ï¼Œä½†å¯¹æ€§èƒ½æœ‰å½±å“ï¼Œéœ€è°¨æ…ä½¿ç”¨ã€‚


    å¾®æœåŠ¡æœ‰å“ªäº›ç»„ä»¶ï¼Œå¯åŠ¨é¡ºåºæ€æ ·çš„ï¼Ÿ MQ --> Register --> Configure -->...


    åˆ†å¸ƒå¼äº‹åŠ¡çš„æ–¹æ¡ˆå¦‚ä½•é€‰æ‹©ï¼Ÿ
        æ–¹æ¡ˆ      ä¸€è‡´æ€§çº§åˆ«     æ€§èƒ½     å¤æ‚åº¦     ä½¿ç”¨åœºæ™¯
        2PCã€3PCï¼Œå¼ºä¸€è‡´æ€§       ä½      ä¸­       é“¶è¡Œæ ¸å¿ƒç³»ç»Ÿ
        TCC      æœ€ç»ˆä¸€è‡´æ€§      é«˜      é«˜       ç”µå•†äº¤æ˜“ç§¯åˆ†ä½“ç³»
        RocketMQ
        äº‹åŠ¡æ¶ˆæ¯   æœ€ç»ˆä¸€è‡´æ€§      é«˜      ä¸­      è®¢å•åˆ›å»ºï¼Œç‰©æµé€šçŸ¥
        æœ€å¤§åŠªåŠ›
        é€šçŸ¥      æœ€ç»ˆä¸€è‡´æ€§      é«˜       ä½      çŸ­ä¿¡æé†’ï¼Œè¿è¥é€šçŸ¥
        Seata AT æœ€ç»ˆä¸€è‡´æ€§      é«˜       ä½       å¾®æœåŠ¡æ¶æ„çš„å¸¸è§„ä¸šåŠ¡
        eBayäº‹ä»¶é˜Ÿåˆ— æœ€ç»ˆä¸€è‡´æ€§    é«˜       ä¸­      å†…éƒ¨çŠ¶æ€åŒæ­¥

        1ï¼Œä¸šåŠ¡å®¹å¿å¤šé•¿æ—¶é—´ä¸ä¸€è‡´ï¼Ÿ
        2ï¼Œäº‹åŠ¡å¤±è´¥åå¦‚ä½•è¡¥å¿ï¼Ÿ
        3ï¼Œæ˜¯å¦æœ‰å®Œå–„çš„ç›‘æ§å’Œäººå·¥ä»‹å…¥æœºåˆ¶ï¼Ÿ


    **1. ç³»ç»Ÿè®¾è®¡ (5åˆ†é’Ÿ)**
       - **é—®é¢˜ï¼š** è®¾è®¡ä¸€ä¸ªâ€œç§’æ€ç³»ç»Ÿâ€ï¼Œè¦æ±‚æ”¯æŒç¬æ—¶é«˜å¹¶å‘ï¼Œå¹¶é˜²æ­¢è¶…å–ã€‚è¯·ç®€è¿°æ ¸å¿ƒè®¾è®¡æ€è·¯ã€‚
       - **è€ƒå¯Ÿç‚¹ï¼š** é«˜å¹¶å‘ç³»ç»Ÿæ¶æ„èƒ½åŠ›ï¼Œèƒ½å¦å°†å‰é¢è®¨è®ºçš„æŠ€æœ¯ä¸²è”èµ·æ¥è§£å†³é—®é¢˜ã€‚
       - **å‚è€ƒç­”æ¡ˆï¼š**
         1. **æ¶æ„åŸåˆ™ï¼š** ç³»ç»Ÿéš”ç¦»ã€æµé‡å‰Šå³°ã€å¼‚æ­¥åŒ–ã€æè‡´ä¼˜åŒ–ã€‚
         2. **å‰ç«¯/ç½‘å…³å±‚ï¼š**
            - é™æ€èµ„æºCDNåŠ é€Ÿã€‚
            - ç­”é¢˜ã€éªŒè¯ç ç­‰æ‰‹æ®µé˜²æ­¢æœºå™¨äººï¼Œå‰Šå³°ã€‚
         3. **åç«¯æœåŠ¡å±‚ï¼š**
            - **ç‹¬ç«‹ç§’æ€æœåŠ¡ï¼š** ä¸ä¸»ä¸šåŠ¡è§£è€¦ã€‚
            - **Redisé¢„å‡åº“å­˜ï¼š** å°†å•†å“åº“å­˜åŠ è½½åˆ°Redisä¸­ï¼Œç”¨æˆ·ä¸‹å•æ—¶åœ¨Redisä¸­åŸå­æ€§ï¼ˆ`DECR`ï¼‰æ‰£å‡åº“å­˜ï¼Œå¿«é€Ÿåˆ¤æ–­æ˜¯å¦è¿˜æœ‰åº“å­˜ï¼Œé¿å…ç›´æ¥è®¿é—®æ•°æ®åº“ã€‚
            - **è¯·æ±‚é˜Ÿåˆ—åŒ–ï¼š** æ‰£å‡åº“å­˜æˆåŠŸçš„è¯·æ±‚è¿›å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆKafka/RocketMQï¼‰ï¼Œå®ç°å¼‚æ­¥å‰Šå³°ã€‚
         4. **ä¸‹æ¸¸æ¶ˆè´¹ï¼š**
            - è®¢å•æœåŠ¡ä»é˜Ÿåˆ—ä¸­æ¶ˆè´¹æ¶ˆæ¯ï¼Œå®Œæˆåˆ›å»ºè®¢å•ã€çœŸå®æ‰£å‡æ•°æ®åº“åº“å­˜ç­‰åç»­æµç¨‹ã€‚
         5. **é˜²è¶…å–ï¼š** æ ¸å¿ƒåœ¨äº**RedisåŸå­æ“ä½œ**å’Œ**æ•°æ®åº“æœ€ç»ˆæ‰£å‡æ—¶åŠ ä¹è§‚é”**ï¼ˆ`update stock set stock = stock - 1 where id = ? and stock > 0`ï¼‰ï¼ŒåŒé‡ä¿éšœã€‚


    **2. ç³»ç»Ÿè®¾è®¡ (5åˆ†é’Ÿ)**
       - **é—®é¢˜ï¼š** è®¾è®¡ä¸€ä¸ªæ•°æ®å¤„ç†ç³»ç»Ÿï¼Œè¦æ±‚ä¸Šä¼ Excelçš„æ•°æ®æ–‡ä»¶ï¼Œæ•°æ®æœ‰10ä¸‡è¡Œï¼Œè¿›è¡Œæ•°æ®å¤„ç†ï¼Œç„¶åå­˜å‚¨åˆ°ç³»ç»Ÿç”¨æ¥ä½œæŠ¥è¡¨å±•ç°ï¼Œè¯·ç®€è¿°æ ¸å¿ƒè®¾è®¡æ€è·¯ã€‚


    ** è§£é‡Šä¸€ä¸‹CAPå®šç†ã€‚ ç­”:CAPå®šç†æŒ‡å‡ºä¸€è‡´æ€§ã€å¯ç”¨æ€§å’Œåˆ†åŒºå®¹é”™æ€§ä¸å¯åŒæ—¶æ»¡è¶³,æœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³ä¸¤é¡¹ã€‚
    ** åˆ†å¸ƒå¼äº‹åŠ¡çš„å®ç°ç­–ç•¥æœ‰å“ªäº›? ç­”:2PC,3PC,å¯é æ¶ˆæ¯,TCC,SAGA,æœ¬åœ°æ¶ˆæ¯è¡¨ç­‰ã€‚


    ** å¦‚ä½•è®¾è®¡é«˜å¯ç”¨ç³»ç»Ÿ


    ** å¦‚ä½•è®¾è®¡ç³»ç»Ÿçš„Observability, å¯è§‚æµ‹æ€§ï¼Œå…¨é“¾è·¯è·Ÿè¸ªã€‚

------------------------------------------------------------------------------------------------------------------------
##6** åå‘æé—®ä¸ç»“æŸ (5åˆ†é’Ÿ)**
   - **é—®é¢˜ï¼š** â€œæˆ‘çš„é—®é¢˜é—®å®Œäº†ï¼Œæ‚¨å¯¹æˆ‘ä»¬å›¢é˜Ÿã€ä¸šåŠ¡æˆ–è€…æŠ€æœ¯æ ˆæœ‰ä»€ä¹ˆæƒ³äº†è§£çš„å—ï¼Ÿâ€
   - **è€ƒå¯Ÿç‚¹ï¼š** å€™é€‰äººçš„æ±‚èŒæ„å‘å’Œå…³æ³¨ç‚¹ã€‚

====================================================================================================================================================
å‰ç«¯ï¼ˆå¯é€‰ï¼‰ï¼š
è·¨åŸŸæŠ¥é”™å¦‚ä½•è§£å†³ï¼Ÿ
ReactJsçš„çŠ¶æ€ç®¡ç†å¦‚ä½•åšçš„ï¼ŸReduxæ€ä¹ˆç”¨çš„ï¼Ÿ
====================================================================================================================================================
å¤§æ•°æ®ï¼ˆå¯é€‰ï¼‰ï¼š
ä»€ä¹ˆæ˜¯æ•°æ®å€¾æ–œ?Mapä»»åŠ¡å¤„ç†æ•°æ®é‡å¤§å°ä¸å‡è¡¡ã€‚å¯é€šè¿‡combineæ“ä½œä¼˜åŒ–ã€‚
å‡ ç§å¸¸è§çš„æ•°æ®å€¾æ–œæƒ…å†µ?æ•°æ®åˆ†å¸ƒä¸å‡ã€æ•°æ®èšé›†ã€æ•°æ®å…³è”åˆ†æç­‰å¯¼è‡´æ•°æ®è´Ÿè½½ä¸å‡è¡¡ã€‚
====================================================================================================================================================
ç®—æ³•ï¼ˆå¯é€‰ï¼‰ï¼š
ç»™å®š3ä¸ªæ•°å­—ï¼Œè¾“å‡ºä¸‰ä¸ªæ•°å­—æ‹¼æ¥æˆçš„æœ€å¤§çš„æ•°ã€‚æ¯”å¦‚ï¼š12ï¼Œ 3ï¼Œ 7 æœ€å¤§çš„æ•°å­—åº”è¯¥æ˜¯ï¼š7312
æ ‘æ•°æ®ç»“æ„çš„éå†ï¼Œéé€’å½’å¦‚ä½•éå†ï¼ˆå †æ ˆ+forå¾ªç¯ï¼‰
æœ‰Nä¸ªé˜¶æ¢¯ï¼Œä¸€ä¸ªäººæ¯ä¸€æ­¥åªèƒ½èµ°ä¸€ä¸ªå°é˜¶æˆ–æ˜¯ä¸¤ä¸ªå°é˜¶ï¼Œé—®è¿™ä¸ªäººä¸Šè¿™ä¸ªé˜¶æ¢¯æœ‰å¤šå°‘ç§èµ°æ³•ï¼Ÿ
====================================================================================================================================================
** Open Questions: **
Technical Skills:
    * What projects have you worked on that showcase your development abilities and experience with various languages, frameworks, databases, etc?
    * Describe a technically complex feature or system you designed and implemented recently. What were some of the constraints and considerations? What technologies did you use and why?
    * How do you stay up-to-date on the latest languages, frameworks, and best practices in software development?
Honesty:
    * Tell me about a time you made a mistake on a project. What was the situation and how did you handle it?
    * Describe a situation where you had to choose between doing something the quick way or pushing to do it the right way. What was your approach and what was the outcome?
Willingness to Learn:
    * What new technologies or programming languages have you learned recently? What motivated you to learn them?
    * What resources do you rely on to keep expanding your software development knowledge?
Teamwork:
    * Tell me about a time you had to collaborate closely with other developers on a project. What was your role and how did you ensure smooth teamwork?
    * Describe a situation where you had to compromise with a teammate or adjust your work to fit with the team's objectives. How did you handle it?
Open-Mindedness:
    * Tell me about a time your viewpoint was changed on an aspect of software development or computing technology. What made you change your perspective?
    * Describe a situation where you had to consider an approach to a technical problem that was new or unfamiliar to you. How open were you to learning and trying it?
====================================================================================================================================================
**é¢è¯•å®˜è¯„ä¼°æ€»ç»“ Checklistï¼š**

| ç»´åº¦ | ä¼˜ç§€è¡¨ç° | å¾…è€ƒé‡è¡¨ç° |
| :--- | :--- | :--- |
| **æ·±åº¦** | èƒ½æ·±å…¥è®²è§£åŸç†ï¼ˆå¦‚ä¸‰çº§ç¼“å­˜ã€B+æ ‘ï¼‰ã€æƒè¡¡åˆ©å¼Š | ä»…åœç•™åœ¨è¡¨é¢ä½¿ç”¨ï¼Œè¯´ä¸æ¸…â€œä¸ºä»€ä¹ˆâ€ |
| **å¹¿åº¦** | èƒ½ä¸²è”èµ·å¤šä¸ªæŠ€æœ¯ç‚¹ï¼ˆå¦‚MQè§£å†³åˆ†å¸ƒå¼äº‹åŠ¡ï¼‰ | çŸ¥è¯†é›¶æ•£ï¼Œæ— æ³•å»ºç«‹è”ç³» |
| **ç»éªŒ** | èƒ½åˆ†äº«çœŸå®é¡¹ç›®ä¸­çš„å‘å’Œè§£å†³æ–¹æ¡ˆ | å›ç­”è¿‡äºç†è®ºåŒ–ï¼Œåƒåœ¨èƒŒä¹¦ |
| **é€»è¾‘** | å›ç­”é—®é¢˜æ¡ç†æ¸…æ™°ï¼Œæœ‰ç»“æ„åŒ–æ€ç»´ | æ€è·¯æ··ä¹±ï¼Œç­”éæ‰€é—® |
| **è®¾è®¡** | ä»£ç å’Œæ¶æ„è®¾è®¡ä½“ç°å‡ºè‰¯å¥½çš„æŠ½è±¡å’Œæ¨¡å¼æ€æƒ³ | ç¼ºä¹è®¾è®¡æ„è¯†ï¼Œå †ç ŒåŠŸèƒ½ |

===================================================================================================================================================
